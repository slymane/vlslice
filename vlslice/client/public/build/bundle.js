var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function o(t,e,n){t.$$.on_destroy.push(a(e,n))}function c(t,e,n,i){if(t){const r=u(t,e,n,i);return t[0](r)}}function u(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function d(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|r[i];return t}return e.dirty|r}return e.dirty}function f(t,e,n,i,r,s){if(r){const l=u(e,n,i,s);t.p(l,r)}}function h(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function m(t,e,n){return t.set(n),e}const p="undefined"!=typeof window;let g=p?()=>window.performance.now():()=>Date.now(),b=p?t=>requestAnimationFrame(t):t;const $=new Set;function y(t){$.forEach((e=>{e.c(t)||($.delete(e),e.f())})),0!==$.size&&b(y)}function v(t,e){t.appendChild(e)}function x(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function w(t){const e=N("style");return function(t,e){v(t.head||t,e)}(x(t),e),e.sheet}function M(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode.removeChild(t)}function S(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function N(t){return document.createElement(t)}function C(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function z(t){return document.createTextNode(t)}function A(){return z(" ")}function j(){return z("")}function _(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function L(t){return""===t?null:+t}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function O(t,e){t.value=null==e?"":e}function F(t,e,n,i){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function q(t,e){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e)return void(i.selected=!0)}t.selectedIndex=-1}function R(t,e,n){t.classList[n?"add":"remove"](e)}function H(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}const V=new Map;let U,I=0;function P(t,e,n,i,r,s,l,a=0){const o=16.666/i;let c="{\n";for(let t=0;t<=1;t+=o){const i=e+(n-e)*s(t);c+=100*t+`%{${l(i,1-i)}}\n`}const u=c+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${a}`,f=x(t),{stylesheet:h,rules:m}=V.get(f)||function(t,e){const n={stylesheet:w(e),rules:{}};return V.set(t,n),n}(f,t);m[d]||(m[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${d} ${i}ms linear ${r}ms 1 both`,I+=1,d}function Y(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-i.length;r&&(t.style.animation=i.join(", "),I-=r,I||b((()=>{I||(V.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),V.clear())})))}function D(t){U=t}function B(){const t=function(){if(!U)throw new Error("Function called outside component initialization");return U}();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=H(e,n,{cancelable:i});return r.slice().forEach((e=>{e.call(t,s)})),!s.defaultPrevented}return!0}}const W=[],X=[],J=[],K=[],Q=Promise.resolve();let Z=!1;function G(t){J.push(t)}function tt(t){K.push(t)}const et=new Set;let nt,it=0;function rt(){const t=U;do{for(;it<W.length;){const t=W[it];it++,D(t),st(t.$$)}for(D(null),W.length=0,it=0;X.length;)X.pop()();for(let t=0;t<J.length;t+=1){const e=J[t];et.has(e)||(et.add(e),e())}J.length=0}while(W.length);for(;K.length;)K.pop()();Z=!1,et.clear(),D(t)}function st(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(G)}}function lt(t,e,n){t.dispatchEvent(H(`${e?"intro":"outro"}${n}`))}const at=new Set;let ot;function ct(){ot={r:0,c:[],p:ot}}function ut(){ot.r||r(ot.c),ot=ot.p}function dt(t,e){t&&t.i&&(at.delete(t),t.i(e))}function ft(t,e,n,i){if(t&&t.o){if(at.has(t))return;at.add(t),ot.c.push((()=>{at.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const ht={duration:0};function mt(n,i,l,a){let o=i(n,l),c=a?0:1,u=null,d=null,f=null;function h(){f&&Y(n,f)}function m(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function p(i){const{delay:s=0,duration:l=300,easing:a=e,tick:p=t,css:v}=o||ht,x={start:g()+s,b:i};i||(x.group=ot,ot.r+=1),u||d?d=x:(v&&(h(),f=P(n,c,i,l,s,a,v)),i&&p(0,1),u=m(x,l),G((()=>lt(n,i,"start"))),function(t){let e;0===$.size&&b(y),new Promise((n=>{$.add(e={c:t,f:n})}))}((t=>{if(d&&t>d.start&&(u=m(d,l),d=null,lt(n,u.b,"start"),v&&(h(),f=P(n,c,u.b,u.duration,0,a,o.css))),u)if(t>=u.end)p(c=u.b,1-c),lt(n,u.b,"end"),d||(u.b?h():--u.group.r||r(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*a(e/u.duration),p(c,1-c)}return!(!u&&!d)})))}return{run(t){s(o)?(nt||(nt=Promise.resolve(),nt.then((()=>{nt=null}))),nt).then((()=>{o=o(),p(t)})):p(t)},end(){h(),u=d=null}}}function pt(t,e){ft(t,1,1,(()=>{e.delete(t.key)}))}function gt(t,e,n,i,r,s,l,a,o,c,u,d){let f=t.length,h=s.length,m=f;const p={};for(;m--;)p[t[m].key]=m;const g=[],b=new Map,$=new Map;for(m=h;m--;){const t=d(r,s,m),a=n(t);let o=l.get(a);o?i&&o.p(t,e):(o=c(a,t),o.c()),b.set(a,g[m]=o),a in p&&$.set(a,Math.abs(m-p[a]))}const y=new Set,v=new Set;function x(t){dt(t,1),t.m(a,u),l.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=g[h-1],n=t[f-1],i=e.key,r=n.key;e===n?(u=e.first,f--,h--):b.has(r)?!l.has(i)||y.has(i)?x(e):v.has(r)?f--:$.get(i)>$.get(r)?(v.add(i),x(e)):(y.add(r),f--):(o(n,l),f--)}for(;f--;){const e=t[f];b.has(e.key)||o(e,l)}for(;h;)x(g[h-1]);return g}function bt(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function $t(t){t&&t.c()}function yt(t,e,i,l){const{fragment:a,on_mount:o,on_destroy:c,after_update:u}=t.$$;a&&a.m(e,i),l||G((()=>{const e=o.map(n).filter(s);c?c.push(...e):r(e),t.$$.on_mount=[]})),u.forEach(G)}function vt(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xt(t,e){-1===t.$$.dirty[0]&&(W.push(t),Z||(Z=!0,Q.then(rt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function wt(e,n,s,l,a,o,c,u=[-1]){const d=U;D(e);const f=e.$$={fragment:null,ctx:null,props:o,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let h=!1;if(f.ctx=s?s(e,n.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),h&&xt(e,t)),n})):[],f.update(),h=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(k)}else f.fragment&&f.fragment.c();n.intro&&dt(e.$$.fragment),yt(e,n.target,n.anchor,n.customElement),rt()}D(d)}class Mt{$destroy(){vt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function kt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function St(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Nt(t){let e,n,i;function r(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<0?r=e+1:s=e}while(r<s)}return r}return 2!==t.length?(e=kt,n=(e,n)=>kt(t(e),n),i=(e,n)=>t(e)-n):(e=t===kt||t===St?t:Ct,n=t,i=t),{left:r,center:function(t,e,n=0,s=t.length){const l=r(t,e,n,s-1);return l>n&&i(t[l-1],e)>-i(t[l],e)?l-1:l},right:function(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<=0?r=e+1:s=e}while(r<s)}return r}}}function Ct(){return 0}const zt=Nt(kt).right;Nt((function(t){return null===t?NaN:+t})).center;var At=zt,jt=Math.sqrt(50),_t=Math.sqrt(10),Et=Math.sqrt(2);function Lt(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=jt?10:s>=_t?5:s>=Et?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=jt?10:s>=_t?5:s>=Et?2:1)}function Tt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ot(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ft(){}var qt=.7,Rt=1/qt,Ht="\\s*([+-]?\\d+)\\s*",Vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ut="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",It=/^#([0-9a-f]{3,8})$/,Pt=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),Yt=new RegExp(`^rgb\\(${Ut},${Ut},${Ut}\\)$`),Dt=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${Vt}\\)$`),Bt=new RegExp(`^rgba\\(${Ut},${Ut},${Ut},${Vt}\\)$`),Wt=new RegExp(`^hsl\\(${Vt},${Ut},${Ut}\\)$`),Xt=new RegExp(`^hsla\\(${Vt},${Ut},${Ut},${Vt}\\)$`),Jt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Kt(){return this.rgb().formatHex()}function Qt(){return this.rgb().formatRgb()}function Zt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=It.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Gt(e):3===n?new ie(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?te(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?te(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Pt.exec(t))?new ie(e[1],e[2],e[3],1):(e=Yt.exec(t))?new ie(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Dt.exec(t))?te(e[1],e[2],e[3],e[4]):(e=Bt.exec(t))?te(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Wt.exec(t))?ce(e[1],e[2]/100,e[3]/100,1):(e=Xt.exec(t))?ce(e[1],e[2]/100,e[3]/100,e[4]):Jt.hasOwnProperty(t)?Gt(Jt[t]):"transparent"===t?new ie(NaN,NaN,NaN,0):null}function Gt(t){return new ie(t>>16&255,t>>8&255,255&t,1)}function te(t,e,n,i){return i<=0&&(t=e=n=NaN),new ie(t,e,n,i)}function ee(t){return t instanceof Ft||(t=Zt(t)),t?new ie((t=t.rgb()).r,t.g,t.b,t.opacity):new ie}function ne(t,e,n,i){return 1===arguments.length?ee(t):new ie(t,e,n,null==i?1:i)}function ie(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function re(){return`#${oe(this.r)}${oe(this.g)}${oe(this.b)}`}function se(){const t=le(this.opacity);return`${1===t?"rgb(":"rgba("}${ae(this.r)}, ${ae(this.g)}, ${ae(this.b)}${1===t?")":`, ${t})`}`}function le(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ae(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function oe(t){return((t=ae(t))<16?"0":"")+t.toString(16)}function ce(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new de(t,e,n,i)}function ue(t){if(t instanceof de)return new de(t.h,t.s,t.l,t.opacity);if(t instanceof Ft||(t=Zt(t)),!t)return new de;if(t instanceof de)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),l=NaN,a=s-r,o=(s+r)/2;return a?(l=e===s?(n-i)/a+6*(n<i):n===s?(i-e)/a+2:(e-n)/a+4,a/=o<.5?s+r:2-s-r,l*=60):a=o>0&&o<1?0:l,new de(l,a,o,t.opacity)}function de(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function fe(t){return(t=(t||0)%360)<0?t+360:t}function he(t){return Math.max(0,Math.min(1,t||0))}function me(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Tt(Ft,Zt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Kt,formatHex:Kt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ue(this).formatHsl()},formatRgb:Qt,toString:Qt}),Tt(ie,ne,Ot(Ft,{brighter(t){return t=null==t?Rt:Math.pow(Rt,t),new ie(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?qt:Math.pow(qt,t),new ie(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ie(ae(this.r),ae(this.g),ae(this.b),le(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:re,formatHex:re,formatHex8:function(){return`#${oe(this.r)}${oe(this.g)}${oe(this.b)}${oe(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:se,toString:se})),Tt(de,(function(t,e,n,i){return 1===arguments.length?ue(t):new de(t,e,n,null==i?1:i)}),Ot(Ft,{brighter(t){return t=null==t?Rt:Math.pow(Rt,t),new de(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?qt:Math.pow(qt,t),new de(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ie(me(t>=240?t-240:t+120,r,i),me(t,r,i),me(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new de(fe(this.h),he(this.s),he(this.l),le(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=le(this.opacity);return`${1===t?"hsl(":"hsla("}${fe(this.h)}, ${100*he(this.s)}%, ${100*he(this.l)}%${1===t?")":`, ${t})`}`}}));var pe=t=>()=>t;function ge(t){return 1==(t=+t)?be:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):pe(isNaN(e)?n:e)}}function be(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):pe(isNaN(t)?e:t)}var $e=function t(e){var n=ge(e);function i(t,e){var i=n((t=ne(t)).r,(e=ne(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),l=be(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=l(e),t+""}}return i.gamma=t,i}(1);function ye(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function ve(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),l=new Array(i);for(n=0;n<r;++n)s[n]=Ce(t[n],e[n]);for(;n<i;++n)l[n]=e[n];return function(t){for(n=0;n<r;++n)l[n]=s[n](t);return l}}function xe(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function we(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Me(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Ce(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var ke=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Se=new RegExp(ke.source,"g");function Ne(t,e){var n,i,r,s=ke.lastIndex=Se.lastIndex=0,l=-1,a=[],o=[];for(t+="",e+="";(n=ke.exec(t))&&(i=Se.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),a[l]?a[l]+=r:a[++l]=r),(n=n[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,o.push({i:l,x:we(n,i)})),s=Se.lastIndex;return s<e.length&&(r=e.slice(s),a[l]?a[l]+=r:a[++l]=r),a.length<2?o[0]?function(t){return function(e){return t(e)+""}}(o[0].x):function(t){return function(){return t}}(e):(e=o.length,function(t){for(var n,i=0;i<e;++i)a[(n=o[i]).i]=n.x(t);return a.join("")})}function Ce(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?pe(e):("number"===r?we:"string"===r?(n=Zt(e))?(e=n,$e):Ne:e instanceof Zt?$e:e instanceof Date?xe:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?ve:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Me:we:ye))(t,e)}function ze(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ae(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function je(t){return(t=Ae(Math.abs(t)))?t[1]:NaN}var _e,Ee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Le(t){if(!(e=Ee.exec(t)))throw new Error("invalid format: "+t);var e;return new Te({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Te(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Oe(t,e){var n=Ae(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Le.prototype=Te.prototype,Te.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Fe={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Oe(100*t,e),r:Oe,s:function(t,e){var n=Ae(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(_e=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,l=i.length;return s===l?i:s>l?i+new Array(s-l+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Ae(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qe(t){return t}var Re,He,Ve,Ue=Array.prototype.map,Ie=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pe(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?qe:(e=Ue.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],l=0,a=e[0],o=0;r>0&&a>0&&(o+a+1>i&&(a=Math.max(1,i-o)),s.push(t.substring(r-=a,r+a)),!((o+=a+1)>i));)a=e[l=(l+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",l=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?qe:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ue.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=Le(t)).fill,n=t.align,d=t.sign,f=t.symbol,h=t.zero,m=t.width,p=t.comma,g=t.precision,b=t.trim,$=t.type;"n"===$?(p=!0,$="g"):Fe[$]||(void 0===g&&(g=12),b=!0,$="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var y="$"===f?r:"#"===f&&/[boxX]/.test($)?"0"+$.toLowerCase():"",v="$"===f?s:/[%p]/.test($)?o:"",x=Fe[$],w=/[defgprs%]/.test($);function M(t){var r,s,o,f=y,M=v;if("c"===$)M=x(t)+M,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),g),b&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==d&&(k=!1),f=(k?"("===d?d:c:"-"===d||"("===d?"":d)+f,M=("s"===$?Ie[8+_e/3]:"")+M+(k&&"("===d?")":""),w)for(r=-1,s=t.length;++r<s;)if(48>(o=t.charCodeAt(r))||o>57){M=(46===o?l+t.slice(r+1):t.slice(r))+M,t=t.slice(0,r);break}}p&&!h&&(t=i(t,1/0));var S=f.length+t.length+M.length,N=S<m?new Array(m-S+1).join(e):"";switch(p&&h&&(t=i(N+t,N.length?m-M.length:1/0),N=""),n){case"<":t=f+t+M+N;break;case"=":t=f+N+t+M;break;case"^":t=N.slice(0,S=N.length>>1)+f+t+M+N.slice(S);break;default:t=N+f+t+M}return a(t)}return g=void 0===g?6:/[gprs]/.test($)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}return{format:d,formatPrefix:function(t,e){var n=d(((t=Le(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(je(e)/3))),r=Math.pow(10,-i),s=Ie[8+i/3];return function(t){return n(r*t)+s}}}}function Ye(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function De(t){return+t}Re=Pe({thousands:",",grouping:[3],currency:["$",""]}),He=Re.format,Ve=Re.formatPrefix;var Be=[0,1];function We(t){return t}function Xe(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Je(t,e,n){var i=t[0],r=t[1],s=e[0],l=e[1];return r<i?(i=Xe(r,i),s=n(l,s)):(i=Xe(i,r),s=n(s,l)),function(t){return s(i(t))}}function Ke(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),l=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<i;)r[l]=Xe(t[l],t[l+1]),s[l]=n(e[l],e[l+1]);return function(e){var n=At(t,e,1,i)-1;return s[n](r[n](e))}}function Qe(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ze(){var t,e,n,i,r,s,l=Be,a=Be,o=Ce,c=We;function u(){var t,e,n,o=Math.min(l.length,a.length);return c!==We&&(t=l[0],e=l[o-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),i=o>2?Ke:Je,r=s=null,d}function d(e){return null==e||isNaN(e=+e)?n:(r||(r=i(l.map(t),a,o)))(t(c(e)))}return d.invert=function(n){return c(e((s||(s=i(a,l.map(t),we)))(n)))},d.domain=function(t){return arguments.length?(l=Array.from(t,De),u()):l.slice()},d.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},d.rangeRound=function(t){return a=Array.from(t),o=ze,u()},d.clamp=function(t){return arguments.length?(c=!!t||We,u()):c!==We},d.interpolate=function(t){return arguments.length?(o=t,u()):o},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,i){return t=n,e=i,u()}}function Ge(){return Ze()(We,We)}function tn(t,e,n,i){var r,s=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=jt?r*=10:s>=_t?r*=5:s>=Et&&(r*=2),e<t?-r:r}(t,e,n);switch((i=Le(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(je(e)/3)))-je(Math.abs(t)))}(s,l))||(i.precision=r),Ve(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,je(e)-je(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-je(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return He(i)}function en(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,s,l,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(l=Lt(t,e,n))||!isFinite(l))return[];if(l>0){let n=Math.round(t/l),i=Math.round(e/l);for(n*l<t&&++n,i*l>e&&--i,s=new Array(r=i-n+1);++a<r;)s[a]=(n+a)*l}else{l=-l;let n=Math.round(t*l),i=Math.round(e*l);for(n/l<t&&++n,i/l>e&&--i,s=new Array(r=i-n+1);++a<r;)s[a]=(n+a)/l}return i&&s.reverse(),s}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return tn(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,s=e(),l=0,a=s.length-1,o=s[l],c=s[a],u=10;for(c<o&&(r=o,o=c,c=r,r=l,l=a,a=r);u-- >0;){if((r=Lt(o,c,n))===i)return s[l]=o,s[a]=c,e(s);if(r>0)o=Math.floor(o/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;o=Math.ceil(o*r)/r,c=Math.floor(c*r)/r}i=r}return t},t}function nn(){var t=Ge();return t.copy=function(){return Qe(t,nn())},Ye.apply(t,arguments),en(t)}function rn(t,e,n){this.k=t,this.x=e,this.y=n}function sn(e){let n,i;return{c(){n=N("div"),E(n,"id",i="filter-"+e[0])},m(t,e){M(t,n,e)},p(t,[e]){1&e&&i!==(i="filter-"+t[0])&&E(n,"id",i)},i:t,o:t,d(t){t&&k(n)}}}function ln(t){return`hsl(${getComputedStyle(document.querySelector(":root")).getPropertyValue(t)})`}function an(t,e,n){let{fieldName:i}=e,{bounds:r=null}=e,{scaleY:s="linear"}=e;return t.$$set=t=>{"fieldName"in t&&n(0,i=t.fieldName),"bounds"in t&&n(1,r=t.bounds),"scaleY"in t&&n(2,s=t.scaleY)},[i,r,s,function(t){if(0==t.length)return;let e={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:`Histogram for ${i}`,data:{values:t},params:[{name:"select",select:{type:"interval",encoding:["x"]}}],mark:{type:"bar",fill:ln("--n"),stroke:ln("--s")},encoding:{x:{title:i,bin:{maxbins:50},field:i},y:{title:"count",aggregate:"count",scale:{type:s}},strokeWidth:{condition:[{param:"select",empty:!1,value:1}],value:0}}};vegaEmbed(`#filter-${i}`,e,{actions:!1}).then((function(t){t.view.addSignalListener("select",(function(t,e){n(1,r=i in e?e[i]:null)}))}))}]}rn.prototype={constructor:rn,scale:function(t){return 1===t?this:new rn(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new rn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new rn(1,0,0);class on extends Mt{constructor(t){super(),wt(this,t,an,sn,l,{fieldName:0,bounds:1,scaleY:2,updateHistogram:3})}get updateHistogram(){return this.$$.ctx[3]}}function cn(t){const e=t-1;return e*e*e+1}function un(t,{delay:e=0,duration:n=400,easing:i=cn}={}){const r=getComputedStyle(t),s=+r.opacity,l=parseFloat(r.height),a=parseFloat(r.paddingTop),o=parseFloat(r.paddingBottom),c=parseFloat(r.marginTop),u=parseFloat(r.marginBottom),d=parseFloat(r.borderTopWidth),f=parseFloat(r.borderBottomWidth);return{delay:e,duration:n,easing:i,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*s};height: ${t*l}px;padding-top: ${t*a}px;padding-bottom: ${t*o}px;margin-top: ${t*c}px;margin-bottom: ${t*u}px;border-top-width: ${t*d}px;border-bottom-width: ${t*f}px;`}}function dn(t){let e,n,i,r,s,l,a,o,u,m,p,g,b,$=t[2]&&t[4]>0?"+":"",y=(t[4]%1==0?t[4]:t[4].toFixed(2))+"";const x=t[6].default,w=c(x,t,t[5],null);return{c(){e=C("g"),n=C("text"),w&&w.c(),i=C("rect"),l=C("text"),a=z("("),o=z($),u=z(y),m=z(")"),E(n,"x","65"),E(n,"y","10"),E(n,"dominant-baseline","middle"),E(n,"text-anchor","end"),E(n,"fill","hsl(var(--bc))"),E(i,"x","70"),E(i,"y","5"),E(i,"width",r=t[3](Math.abs(t[4]))),E(i,"height","10"),E(i,"fill",s=t[2]?t[4]>0?"hsl(var(--su))":"hsl(var(--er))":"hsl(var(--n))"),E(l,"x",p=75+t[3](Math.abs(t[4]))),E(l,"y","10"),E(l,"dominant-baseline","middle"),E(l,"fill","hsl(var(--b3))"),E(e,"transform",g="translate("+t[0]+", "+t[1]+")")},m(t,r){M(t,e,r),v(e,n),w&&w.m(n,null),v(e,i),v(e,l),v(l,a),v(l,o),v(l,u),v(l,m),b=!0},p(t,[n]){w&&w.p&&(!b||32&n)&&f(w,x,t,t[5],b?d(x,t[5],n,null):h(t[5]),null),(!b||24&n&&r!==(r=t[3](Math.abs(t[4]))))&&E(i,"width",r),(!b||20&n&&s!==(s=t[2]?t[4]>0?"hsl(var(--su))":"hsl(var(--er))":"hsl(var(--n))"))&&E(i,"fill",s),(!b||20&n)&&$!==($=t[2]&&t[4]>0?"+":"")&&T(o,$),(!b||16&n)&&y!==(y=(t[4]%1==0?t[4]:t[4].toFixed(2))+"")&&T(u,y),(!b||24&n&&p!==(p=75+t[3](Math.abs(t[4]))))&&E(l,"x",p),(!b||3&n&&g!==(g="translate("+t[0]+", "+t[1]+")"))&&E(e,"transform",g)},i(t){b||(dt(w,t),b=!0)},o(t){ft(w,t),b=!1},d(t){t&&k(e),w&&w.d(t)}}}function fn(t,e,n){let{$$slots:i={},$$scope:r}=e,{offsetX:s=0}=e,{offsetY:l=0}=e,{signed:a=!1}=e,{scale:o}=e,{value:c}=e;return t.$$set=t=>{"offsetX"in t&&n(0,s=t.offsetX),"offsetY"in t&&n(1,l=t.offsetY),"signed"in t&&n(2,a=t.signed),"scale"in t&&n(3,o=t.scale),"value"in t&&n(4,c=t.value),"$$scope"in t&&n(5,r=t.$$scope)},[s,l,a,o,c,r,i]}class hn extends Mt{constructor(t){super(),wt(this,t,fn,dn,l,{offsetX:0,offsetY:1,signed:2,scale:3,value:4})}}function mn(t){let e;return{c(){e=z("Mean")},m(t,n){M(t,e,n)},d(t){t&&k(e)}}}function pn(t){let e;return{c(){e=z("Variance")},m(t,n){M(t,e,n)},d(t){t&&k(e)}}}function gn(t){let e;return{c(){e=z("Size")},m(t,n){M(t,e,n)},d(t){t&&k(e)}}}function bn(t){let e,n,i,r,s,l;return n=new hn({props:{offsetY:0,scale:t[1],value:t[0].mean,signed:!0,$$slots:{default:[mn]},$$scope:{ctx:t}}}),i=new hn({props:{offsetY:20,scale:t[2],value:t[0].variance,$$slots:{default:[pn]},$$scope:{ctx:t}}}),r=new hn({props:{offsetY:40,scale:t[3],value:t[0].size,$$slots:{default:[gn]},$$scope:{ctx:t}}}),{c(){e=C("svg"),$t(n.$$.fragment),$t(i.$$.fragment),$t(r.$$.fragment),E(e,"id",s="summary-"+t[0].id),E(e,"width","100%"),E(e,"height","60")},m(t,s){M(t,e,s),yt(n,e,null),yt(i,e,null),yt(r,e,null),l=!0},p(t,[a]){const o={};2&a&&(o.scale=t[1]),1&a&&(o.value=t[0].mean),16&a&&(o.$$scope={dirty:a,ctx:t}),n.$set(o);const c={};4&a&&(c.scale=t[2]),1&a&&(c.value=t[0].variance),16&a&&(c.$$scope={dirty:a,ctx:t}),i.$set(c);const u={};8&a&&(u.scale=t[3]),1&a&&(u.value=t[0].size),16&a&&(u.$$scope={dirty:a,ctx:t}),r.$set(u),(!l||1&a&&s!==(s="summary-"+t[0].id))&&E(e,"id",s)},i(t){l||(dt(n.$$.fragment,t),dt(i.$$.fragment,t),dt(r.$$.fragment,t),l=!0)},o(t){ft(n.$$.fragment,t),ft(i.$$.fragment,t),ft(r.$$.fragment,t),l=!1},d(t){t&&k(e),vt(n),vt(i),vt(r)}}}function $n(t,e,n){let{cluster:i}=e,{scaleMean:r}=e,{scaleVariance:s}=e,{scaleSize:l}=e;return t.$$set=t=>{"cluster"in t&&n(0,i=t.cluster),"scaleMean"in t&&n(1,r=t.scaleMean),"scaleVariance"in t&&n(2,s=t.scaleVariance),"scaleSize"in t&&n(3,l=t.scaleSize)},[i,r,s,l]}class yn extends Mt{constructor(t){super(),wt(this,t,$n,bn,l,{cluster:0,scaleMean:1,scaleVariance:2,scaleSize:3})}}const vn=[];function xn(e,n=t){let i;const r=new Set;function s(t){if(l(e,t)&&(e=t,i)){const t=!vn.length;for(const t of r)t[1](),vn.push(t,e);if(t){for(let t=0;t<vn.length;t+=2)vn[t][0](vn[t+1]);vn.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(l,a=t){const o=[l,a];return r.add(o),1===r.size&&(i=n(s)||t),l(e),()=>{r.delete(o),0===r.size&&(i(),i=null)}}}}const wn=xn([]),Mn=function(e,n,i){const l=!Array.isArray(e),o=l?[e]:e,c=n.length<2;return u=e=>{let i=!1;const u=[];let d=0,f=t;const h=()=>{if(d)return;f();const i=n(l?u[0]:u,e);c?e(i):f=s(i)?i:t},m=o.map(((t,e)=>a(t,(t=>{u[e]=t,d&=~(1<<e),i&&h()}),(()=>{d|=1<<e}))));return i=!0,h(),function(){r(m),f()}},{subscribe:xn(i,u).subscribe};var u}(wn,(t=>{let e=[];for(let n=0;n<t.length;n++)e.push(...t[n].images.filter((t=>t.selected)));return[...new Set(e)]}));function kn(t,{root:e=null,rootMargin:n="0px 0px 0px 0px",threshold:i=0}={}){if(window&&"IntersectionObserver"in window){const r=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const e=t.target;e.dataset.src&&(e.src=e.dataset.src),e.dataset.srcset&&(e.srcset=e.dataset.srcset),r.unobserve(e)}}))}),{root:e,rootMargin:n,threshold:i});return r.observe(t),{destroy(){r&&r.unobserve(t)}}}}function Sn(e){let n,i,r,s;return{c(){n=N("div"),i=N("button"),i.innerHTML='<i class="fa-solid fa-close"></i>',E(i,"class","btn btn-circle btn-outline btn-xs "),E(n,"class","absolute top-1 left-1")},m(t,l){M(t,n,l),v(n,i),r||(s=_(i,"click",e[7]),r=!0)},p:t,d(t){t&&k(n),r=!1,s()}}}function Nn(e){let n,i,l,a,o,c,u=e[4]&&Sn(e);return{c(){n=N("div"),i=N("img"),a=A(),u&&u.c(),E(i,"id",l="img-"+e[1]),E(i,"alt","Filtered dataset sample"),E(i,"class","relative svelte-gmcpyq"),E(i,"data-src",e[2]),E(i,"width",e[3]),E(i,"height",e[3]),F(i,"cursor","pointer"),R(i,"selected",e[0]),E(n,"class","relative expand overflow-visible m-0 svelte-gmcpyq")},m(r,l){var d,f;M(r,n,l),v(n,i),v(n,a),u&&u.m(n,null),o||(c=[_(i,"click",(f=e[6],function(t){return t.stopPropagation(),f.call(this,t)})),(d=kn.call(null,i),d&&s(d.destroy)?d.destroy:t)],o=!0)},p(t,[e]){2&e&&l!==(l="img-"+t[1])&&E(i,"id",l),4&e&&E(i,"data-src",t[2]),8&e&&E(i,"width",t[3]),8&e&&E(i,"height",t[3]),1&e&&R(i,"selected",t[0]),t[4]?u?u.p(t,e):(u=Sn(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i:t,o:t,d(t){t&&k(n),u&&u.d(),o=!1,r(c)}}}function Cn(t,e,n){let i;o(t,wn,(t=>n(8,i=t)));let{id:r}=e,{path:s}=e,{size:l}=e,{selected:a}=e,{deletable:c=!1}=e;const u=B();return t.$$set=t=>{"id"in t&&n(1,r=t.id),"path"in t&&n(2,s=t.path),"size"in t&&n(3,l=t.size),"selected"in t&&n(0,a=t.selected),"deletable"in t&&n(4,c=t.deletable)},[a,r,s,l,c,u,function(){n(0,a=!a),wn.set(i)},()=>u("delete")]}class zn extends Mt{constructor(t){super(),wt(this,t,Cn,Nn,l,{id:1,path:2,size:3,selected:0,deletable:4})}}function An(e){let n,i;return{c(){n=N("div"),E(n,"id",i="correlation-"+e[0])},m(t,e){M(t,n,e)},p(t,[e]){1&e&&i!==(i="correlation-"+t[0])&&E(n,"id",i)},i:t,o:t,d(t){t&&k(n)}}}function jn(t,e,n){let i,{cluster:r}=e,{name:s}=e,{baseline:l}=e,{augment:a}=e;const o=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),c=B();function u(t){fetch("./correlation",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({cluster:t})}).then((t=>t.json())).then((function(t){for(let e=0;e<t.length;e++)t[e].is_member=t[e].is_member?`In "${s}"`:`Not In "${s}"`;let e=t.map((t=>t.sim)),n={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Correlation between cluster centroid similarity and DC",width:.8*o,height:250,data:{values:t},layer:[{mark:"point",encoding:{x:{axis:{title:`Less "${s}" → More "${s}"`},field:"sim",type:"quantitative",scale:{domain:[Math.min(...e),Math.max(...e)]}},y:{axis:{title:`"${l}" → "${a}"`},field:"dcs",type:"quantitative",scale:{domain:[-1,1]}},color:{axis:{title:"Slice Membership"},field:"is_member",type:"nominal",scale:{range:["green","gray"]}},tooltip:[{field:"image"}]}},{mark:{type:"line",color:"blue"},transform:[{regression:"dcs",on:"sim"}],encoding:{x:{field:"sim",type:"quantitative"},y:{field:"dcs",type:"quantitative"}}}]};vegaEmbed(`#correlation-${i}`,n,{actions:!1}).then((function(t){t.view.addEventListener("click",(function(t,e){e.hasOwnProperty("datum")&&(console.log("In"==e.datum.is_member.slice(0,2)?"delete":"add"),"In"==e.datum.is_member.slice(0,2)?c("delete",e.datum):c("add",e.datum))}))}))}))}return t.$$set=t=>{"cluster"in t&&n(1,r=t.cluster),"name"in t&&n(2,s=t.name),"baseline"in t&&n(3,l=t.baseline),"augment"in t&&n(4,a=t.augment)},t.$$.update=()=>{4&t.$$.dirty&&n(0,i=s.replaceAll(" ","-").replace(/[^a-zA-Z0-9]/g,"")),2&t.$$.dirty&&u(r)},[i,r,s,l,a,u]}class _n extends Mt{constructor(t){super(),wt(this,t,jn,An,l,{cluster:1,name:2,baseline:3,augment:4,getCorrelation:5})}get getCorrelation(){return this.$$.ctx[5]}}function En(t,e,n){const i=t.slice();i[35]=e[n];const r=i[14].filter((t=>t.id==i[35]))[0];return i[36]=r,i}function Ln(t,e,n){const i=t.slice();i[35]=e[n];const r=i[14].filter((t=>t.id==i[35]))[0];return i[39]=r,i}function Tn(t,e,n){const i=t.slice();return i[42]=e[n],i[43]=e,i[44]=n,i}function On(t,e,n){const i=t.slice();return i[42]=e[n],i[45]=e,i[46]=n,i}function Fn(e){let n,i,s,l,a;return{c(){n=N("button"),n.textContent="Export Slice",i=A(),s=N("button"),s.textContent="Delete Slice",E(n,"class","btn btn-xs btn-outline w-1/3 mx-2 my-1"),E(s,"class","btn btn-xs btn-outline w-1/3 mx-2 my-1")},m(t,r){M(t,n,r),M(t,i,r),M(t,s,r),l||(a=[_(n,"click",e[20]),_(s,"click",e[21])],l=!0)},p:t,d(t){t&&k(n),t&&k(i),t&&k(s),l=!1,r(a)}}}function qn(t,e){let n,i,r,s;function l(t){e[22](t,e[42])}let a={id:e[42].idx,path:e[42].iid,size:Qn,deletable:e[0].isUserList};return void 0!==e[42].selected&&(a.selected=e[42].selected),i=new zn({props:a}),X.push((()=>bt(i,"selected",l))),i.$on("delete",(function(){return e[23](e[42])})),{key:t,first:null,c(){n=j(),$t(i.$$.fragment),this.first=n},m(t,e){M(t,n,e),yt(i,t,e),s=!0},p(t,n){e=t;const s={};1&n[0]&&(s.id=e[42].idx),1&n[0]&&(s.path=e[42].iid),1&n[0]&&(s.deletable=e[0].isUserList),!r&&1&n[0]&&(r=!0,s.selected=e[42].selected,tt((()=>r=!1))),i.$set(s)},i(t){s||(dt(i.$$.fragment,t),s=!0)},o(t){ft(i.$$.fragment,t),s=!1},d(t){t&&k(n),vt(i,t)}}}function Rn(t){let e,n,i,r=[],s=new Map,l=t[0].images.slice(Kn,t[0].images.length);const a=t=>t[42].idx;for(let e=0;e<l.length;e+=1){let n=Tn(t,l,e),i=a(n);s.set(i,r[e]=Hn(i,n))}return{c(){e=N("div");for(let t=0;t<r.length;t+=1)r[t].c();E(e,"class","grid grid-cols-12 gap-0.5")},m(t,n){M(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null);i=!0},p(t,n){32769&n[0]&&(l=t[0].images.slice(Kn,t[0].images.length),ct(),r=gt(r,n,a,1,t,l,s,e,pt,Hn,null,Tn),ut())},i(t){if(!i){for(let t=0;t<l.length;t+=1)dt(r[t]);G((()=>{n||(n=mt(e,un,{},!0)),n.run(1)})),i=!0}},o(t){for(let t=0;t<r.length;t+=1)ft(r[t]);n||(n=mt(e,un,{},!1)),n.run(0),i=!1},d(t){t&&k(e);for(let t=0;t<r.length;t+=1)r[t].d();t&&n&&n.end()}}}function Hn(t,e){let n,i,r,s;function l(t){e[24](t,e[42])}let a={class:"m-0",id:e[42].idx,path:e[42].iid,size:Qn,deletable:e[0].isUserList};return void 0!==e[42].selected&&(a.selected=e[42].selected),i=new zn({props:a}),X.push((()=>bt(i,"selected",l))),i.$on("delete",(function(){return e[25](e[42])})),{key:t,first:null,c(){n=j(),$t(i.$$.fragment),this.first=n},m(t,e){M(t,n,e),yt(i,t,e),s=!0},p(t,n){e=t;const s={};1&n[0]&&(s.id=e[42].idx),1&n[0]&&(s.path=e[42].iid),1&n[0]&&(s.deletable=e[0].isUserList),!r&&1&n[0]&&(r=!0,s.selected=e[42].selected,tt((()=>r=!1))),i.$set(s)},i(t){s||(dt(i.$$.fragment,t),s=!0)},o(t){ft(i.$$.fragment,t),s=!1},d(t){t&&k(n),vt(i,t)}}}function Vn(t){let e,n,i,s,l,a,o,c,u,d,f,h,m,p=t[0].isUserList&&Un(t);return{c(){e=N("label"),n=N("input"),i=A(),s=N("span"),s.textContent="Show Similar",l=A(),a=N("label"),o=N("input"),c=A(),u=N("span"),u.textContent="Show Counterfactual",d=A(),p&&p.c(),f=j(),E(n,"type","checkbox"),E(n,"class","toggle mr-1"),E(s,"class","label-text"),E(e,"disabled",""),E(e,"class","label cursor-pointer justify-start"),E(o,"type","checkbox"),E(o,"class","toggle mr-1"),E(u,"class","label-text"),E(a,"class","label cursor-pointer justify-start")},m(r,g){M(r,e,g),v(e,n),n.checked=t[8],v(e,i),v(e,s),M(r,l,g),M(r,a,g),v(a,o),o.checked=t[9],v(a,c),v(a,u),M(r,d,g),p&&p.m(r,g),M(r,f,g),h||(m=[_(n,"change",t[27]),_(n,"change",t[28]),_(o,"change",t[29]),_(o,"change",t[30])],h=!0)},p(t,e){256&e[0]&&(n.checked=t[8]),512&e[0]&&(o.checked=t[9]),t[0].isUserList?p?p.p(t,e):(p=Un(t),p.c(),p.m(f.parentNode,f)):p&&(p.d(1),p=null)},d(t){t&&k(e),t&&k(l),t&&k(a),t&&k(d),p&&p.d(t),t&&k(f),h=!1,r(m)}}}function Un(t){let e,n,i,l,a,o;return{c(){e=N("label"),n=N("input"),i=A(),l=N("span"),l.textContent="Show Correlation",E(n,"type","checkbox"),E(n,"class","toggle mr-1"),E(l,"class","label-text"),E(e,"class","label cursor-pointer justify-start")},m(r,c){M(r,e,c),v(e,n),n.checked=t[10],v(e,i),v(e,l),a||(o=[_(n,"change",t[31]),_(n,"change",(function(){s(t[11].getCorrelation(t[0]))&&t[11].getCorrelation(t[0]).apply(this,arguments)}))],a=!0)},p(e,i){t=e,1024&i[0]&&(n.checked=t[10])},d(t){t&&k(e),a=!1,r(o)}}}function In(t){let e,n,i,r,s,l,a=t[12],o=[];for(let e=0;e<a.length;e+=1)o[e]=Yn(Ln(t,a,e));const c=t=>ft(o[t],1,1,(()=>{o[t]=null}));return{c(){e=N("div"),n=N("h3"),n.textContent="Similar clusters...",i=A(),r=N("div");for(let t=0;t<o.length;t+=1)o[t].c();E(n,"class","text-lg text-info mb-2"),F(r,"max-height","500px"),E(r,"class","overflow-y-scroll"),E(e,"class","shadow-lg shadow-info w-9/10 p-8 mb-8")},m(t,s){M(t,e,s),v(e,n),v(e,i),v(e,r);for(let t=0;t<o.length;t+=1)o[t].m(r,null);l=!0},p(t,e){if(20509&e[0]){let n;for(a=t[12],n=0;n<a.length;n+=1){const i=Ln(t,a,n);o[n]?(o[n].p(i,e),dt(o[n],1)):(o[n]=Yn(i),o[n].c(),dt(o[n],1),o[n].m(r,null))}for(ct(),n=a.length;n<o.length;n+=1)c(n);ut()}},i(t){if(!l){for(let t=0;t<a.length;t+=1)dt(o[t]);G((()=>{s||(s=mt(e,un,{},!0)),s.run(1)})),l=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)ft(o[t]);s||(s=mt(e,un,{},!1)),s.run(0),l=!1},d(t){t&&k(e),S(o,t),t&&s&&s.end()}}}function Pn(t){let e,n;return e=new Gn({props:{cluster:t[39],scaleMean:t[2],scaleVariance:t[3],scaleSize:t[4],disableShow:!0}}),{c(){$t(e.$$.fragment)},m(t,i){yt(e,t,i),n=!0},p(t,n){const i={};20480&n[0]&&(i.cluster=t[39]),4&n[0]&&(i.scaleMean=t[2]),8&n[0]&&(i.scaleVariance=t[3]),16&n[0]&&(i.scaleSize=t[4]),e.$set(i)},i(t){n||(dt(e.$$.fragment,t),n=!0)},o(t){ft(e.$$.fragment,t),n=!1},d(t){vt(e,t)}}}function Yn(t){let e,n,i=t[0].id!=t[35]&&!t[39].isUserList&&Pn(t);return{c(){i&&i.c(),e=j()},m(t,r){i&&i.m(t,r),M(t,e,r),n=!0},p(t,n){t[0].id==t[35]||t[39].isUserList?i&&(ct(),ft(i,1,1,(()=>{i=null})),ut()):i?(i.p(t,n),20481&n[0]&&dt(i,1)):(i=Pn(t),i.c(),dt(i,1),i.m(e.parentNode,e))},i(t){n||(dt(i),n=!0)},o(t){ft(i),n=!1},d(t){i&&i.d(t),t&&k(e)}}}function Dn(t){let e,n,i,r,s,l,a=t[13],o=[];for(let e=0;e<a.length;e+=1)o[e]=Wn(En(t,a,e));const c=t=>ft(o[t],1,1,(()=>{o[t]=null}));return{c(){e=N("div"),n=N("h3"),n.textContent="Counterfactual clusters...",i=A(),r=N("div");for(let t=0;t<o.length;t+=1)o[t].c();E(n,"class","text-lg text-info mb-2"),F(r,"max-height","500px"),E(r,"class","overflow-y-scroll"),E(e,"class","shadow-lg shadow-info w-9/10 p-8 mb-8")},m(t,s){M(t,e,s),v(e,n),v(e,i),v(e,r);for(let t=0;t<o.length;t+=1)o[t].m(r,null);l=!0},p(t,e){if(24604&e[0]){let n;for(a=t[13],n=0;n<a.length;n+=1){const i=En(t,a,n);o[n]?(o[n].p(i,e),dt(o[n],1)):(o[n]=Wn(i),o[n].c(),dt(o[n],1),o[n].m(r,null))}for(ct(),n=a.length;n<o.length;n+=1)c(n);ut()}},i(t){if(!l){for(let t=0;t<a.length;t+=1)dt(o[t]);G((()=>{s||(s=mt(e,un,{},!0)),s.run(1)})),l=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)ft(o[t]);s||(s=mt(e,un,{},!1)),s.run(0),l=!1},d(t){t&&k(e),S(o,t),t&&s&&s.end()}}}function Bn(t){let e,n;return e=new Gn({props:{cluster:t[36],scaleMean:t[2],scaleVariance:t[3],scaleSize:t[4],disableShow:!0}}),{c(){$t(e.$$.fragment)},m(t,i){yt(e,t,i),n=!0},p(t,n){const i={};24576&n[0]&&(i.cluster=t[36]),4&n[0]&&(i.scaleMean=t[2]),8&n[0]&&(i.scaleVariance=t[3]),16&n[0]&&(i.scaleSize=t[4]),e.$set(i)},i(t){n||(dt(e.$$.fragment,t),n=!0)},o(t){ft(e.$$.fragment,t),n=!1},d(t){vt(e,t)}}}function Wn(t){let e,n,i=!t[36].isUserList&&Bn(t);return{c(){i&&i.c(),e=j()},m(t,r){i&&i.m(t,r),M(t,e,r),n=!0},p(t,n){t[36].isUserList?i&&(ct(),ft(i,1,1,(()=>{i=null})),ut()):i?(i.p(t,n),24576&n[0]&&dt(i,1)):(i=Bn(t),i.c(),dt(i,1),i.m(e.parentNode,e))},i(t){n||(dt(i),n=!0)},o(t){ft(i),n=!1},d(t){i&&i.d(t),t&&k(e)}}}function Xn(t){let e,n,i,r,s,l,a,o,c,u={cluster:t[0],name:t[1],baseline:t[6],augment:t[7]};return a=new _n({props:u}),t[32](a),a.$on("add",t[33]),a.$on("delete",t[34]),{c(){e=N("div"),n=N("h3"),i=z('Correlation with "'),r=z(t[7]),s=z('"...'),l=A(),$t(a.$$.fragment),E(n,"class","text-lg"),E(e,"class","shadow-lg w-9/10 p-8 mb-8")},m(t,o){M(t,e,o),v(e,n),v(n,i),v(n,r),v(n,s),v(e,l),yt(a,e,null),c=!0},p(t,e){(!c||128&e[0])&&T(r,t[7]);const n={};1&e[0]&&(n.cluster=t[0]),2&e[0]&&(n.name=t[1]),64&e[0]&&(n.baseline=t[6]),128&e[0]&&(n.augment=t[7]),a.$set(n)},i(t){c||(dt(a.$$.fragment,t),G((()=>{o||(o=mt(e,un,{},!0)),o.run(1)})),c=!0)},o(t){ft(a.$$.fragment,t),o||(o=mt(e,un,{},!1)),o.run(0),c=!1},d(n){n&&k(e),t[32](null),vt(a),n&&o&&o.end()}}}function Jn(t){let e,n,i,s,l,a,o,c,u,d,f,h,m,p,g,b,$,y,x,w,S,C,z,j,L,T,O,F,q=[],H=new Map;s=new yn({props:{cluster:t[0],scaleMean:t[2],scaleVariance:t[3],scaleSize:t[4]}});let V=t[0].isUserList&&Fn(t),U=t[0].images.slice(0,Kn);const I=t=>t[42].idx;for(let e=0;e<U.length;e+=1){let n=On(t,U,e),i=I(n);H.set(i,q[e]=qn(i,n))}let P=t[0].showMore&&Rn(t),Y=!t[5]&&Vn(t),D=t[8]&&In(t),B=t[9]&&Dn(t),W=t[10]&&Xn(t);return{c(){e=N("div"),n=N("div"),i=N("div"),$t(s.$$.fragment),l=A(),a=N("div"),o=N("button"),o.textContent="Select All",c=A(),u=N("button"),u.textContent="Unselect All",d=A(),V&&V.c(),f=A(),h=N("div"),m=N("div");for(let t=0;t<q.length;t+=1)q[t].c();p=A(),P&&P.c(),g=A(),b=N("div"),$=N("label"),y=N("input"),w=A(),S=N("span"),S.textContent="Show More",C=A(),Y&&Y.c(),z=A(),D&&D.c(),j=A(),B&&B.c(),L=A(),W&&W.c(),E(o,"class","btn btn-xs btn-outline w-1/3 mx-2 my-1"),E(u,"class","btn btn-xs btn-outline w-1/3 mx-2 my-1"),E(a,"class","flex flex-wrap justify-center"),E(i,"class","col-span-2 cluster-summary svelte-n07xgu"),E(m,"class","grid grid-cols-12 gap-0.5 mb-px"),E(h,"class","col-span-5"),E(y,"type","checkbox"),E(y,"class","toggle mr-1"),y.disabled=x=t[0].images.length<=12,E(S,"class","label-text svelte-n07xgu"),R(S,"disable-span",t[0].images.length<=12?"hsl(var(--b3))":""),E($,"class","label cursor-pointer justify-start"),E(b,"class","form-control justify-start"),E(n,"class","grid grid-cols-8 p-2"),E(e,"class","bbottom svelte-n07xgu")},m(r,x){M(r,e,x),v(e,n),v(n,i),yt(s,i,null),v(i,l),v(i,a),v(a,o),v(a,c),v(a,u),v(a,d),V&&V.m(a,null),v(n,f),v(n,h),v(h,m);for(let t=0;t<q.length;t+=1)q[t].m(m,null);v(h,p),P&&P.m(h,null),v(n,g),v(n,b),v(b,$),v($,y),y.checked=t[0].showMore,v($,w),v($,S),v(b,C),Y&&Y.m(b,null),v(e,z),D&&D.m(e,null),v(e,j),B&&B.m(e,null),v(e,L),W&&W.m(e,null),T=!0,O||(F=[_(o,"click",t[16]),_(u,"click",t[17]),_(y,"change",t[26])],O=!0)},p(t,n){const i={};1&n[0]&&(i.cluster=t[0]),4&n[0]&&(i.scaleMean=t[2]),8&n[0]&&(i.scaleVariance=t[3]),16&n[0]&&(i.scaleSize=t[4]),s.$set(i),t[0].isUserList?V?V.p(t,n):(V=Fn(t),V.c(),V.m(a,null)):V&&(V.d(1),V=null),32769&n[0]&&(U=t[0].images.slice(0,Kn),ct(),q=gt(q,n,I,1,t,U,H,m,pt,qn,null,On),ut()),t[0].showMore?P?(P.p(t,n),1&n[0]&&dt(P,1)):(P=Rn(t),P.c(),dt(P,1),P.m(h,null)):P&&(ct(),ft(P,1,1,(()=>{P=null})),ut()),(!T||1&n[0]&&x!==(x=t[0].images.length<=12))&&(y.disabled=x),1&n[0]&&(y.checked=t[0].showMore),1&n[0]&&R(S,"disable-span",t[0].images.length<=12?"hsl(var(--b3))":""),t[5]?Y&&(Y.d(1),Y=null):Y?Y.p(t,n):(Y=Vn(t),Y.c(),Y.m(b,null)),t[8]?D?(D.p(t,n),256&n[0]&&dt(D,1)):(D=In(t),D.c(),dt(D,1),D.m(e,j)):D&&(ct(),ft(D,1,1,(()=>{D=null})),ut()),t[9]?B?(B.p(t,n),512&n[0]&&dt(B,1)):(B=Dn(t),B.c(),dt(B,1),B.m(e,L)):B&&(ct(),ft(B,1,1,(()=>{B=null})),ut()),t[10]?W?(W.p(t,n),1024&n[0]&&dt(W,1)):(W=Xn(t),W.c(),dt(W,1),W.m(e,null)):W&&(ct(),ft(W,1,1,(()=>{W=null})),ut())},i(t){if(!T){dt(s.$$.fragment,t);for(let t=0;t<U.length;t+=1)dt(q[t]);dt(P),dt(D),dt(B),dt(W),T=!0}},o(t){ft(s.$$.fragment,t);for(let t=0;t<q.length;t+=1)ft(q[t]);ft(P),ft(D),ft(B),ft(W),T=!1},d(t){t&&k(e),vt(s),V&&V.d();for(let t=0;t<q.length;t+=1)q[t].d();P&&P.d(),Y&&Y.d(),D&&D.d(),B&&B.d(),W&&W.d(),O=!1,r(F)}}}const Kn=12,Qn=128;function Zn(t,e,n){let i;o(t,wn,(t=>n(14,i=t)));const r=B();let s,{name:l=""}=e,{cluster:a}=e,{scaleMean:c}=e,{scaleVariance:u}=e,{scaleSize:d}=e,{disableShow:f=!1}=e,{baseline:h=""}=e,{augment:m=""}=e,p=!1,g=!1,b=!1,$=[],y=[];function v(t){p&&fetch("./similar",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({cluster:t})}).then((t=>t.json())).then((function(t){n(12,$=t.neighbors)}))}function x(t){g&&fetch("./counter",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({cluster:t})}).then((t=>t.json())).then((function(t){n(13,y=t.counters)}))}return t.$$set=t=>{"name"in t&&n(1,l=t.name),"cluster"in t&&n(0,a=t.cluster),"scaleMean"in t&&n(2,c=t.scaleMean),"scaleVariance"in t&&n(3,u=t.scaleVariance),"scaleSize"in t&&n(4,d=t.scaleSize),"disableShow"in t&&n(5,f=t.disableShow),"baseline"in t&&n(6,h=t.baseline),"augment"in t&&n(7,m=t.augment)},t.$$.update=()=>{1&t.$$.dirty[0]&&v(a),1&t.$$.dirty[0]&&x(a)},[a,l,c,u,d,f,h,m,p,g,b,s,$,y,i,r,function(){for(let t=0;t<a.images.length;t++)n(0,a.images[t].selected=!0,a);wn.set(i)},function(){for(let t=0;t<a.images.length;t++)n(0,a.images[t].selected=!1,a);wn.set(i)},v,x,()=>function(t,e){var n=t.images.map((t=>t.iid)),i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n)),r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("download",e+".json"),r.click(),r.remove()}(a,l),()=>r("deleteCluster"),function(e,i){t.$$.not_equal(i.selected,e)&&(i.selected=e,n(0,a))},t=>r("deleteImage",{image:t}),function(e,i){t.$$.not_equal(i.selected,e)&&(i.selected=e,n(0,a))},t=>r("deleteImage",{image:t}),function(){a.showMore=this.checked,n(0,a)},function(){p=this.checked,n(8,p)},()=>v(a),function(){g=this.checked,n(9,g)},()=>x(a),function(){b=this.checked,n(10,b)},function(t){X[t?"unshift":"push"]((()=>{s=t,n(11,s)}))},t=>r("addImage",{image:t.detail}),t=>r("deleteImage",{image:t.detail})]}class Gn extends Mt{constructor(t){super(),wt(this,t,Zn,Jn,l,{name:1,cluster:0,scaleMean:2,scaleVariance:3,scaleSize:4,disableShow:5,baseline:6,augment:7},null,[-1,-1])}}function ti(t,{delay:e=0,duration:n=400,easing:i=cn,axis:r="x"}={}){const s=getComputedStyle(t),l=+s.opacity,a="y"===r?"height":"width",o=parseFloat(s[a]),c="y"===r?["top","bottom"]:["left","right"],u=c.map((t=>`${t[0].toUpperCase()}${t.slice(1)}`)),d=parseFloat(s[`padding${u[0]}`]),f=parseFloat(s[`padding${u[1]}`]),h=parseFloat(s[`margin${u[0]}`]),m=parseFloat(s[`margin${u[1]}`]),p=parseFloat(s[`border${u[0]}Width`]),g=parseFloat(s[`border${u[1]}Width`]);return{delay:e,duration:n,easing:i,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*l};${a}: ${t*o}px;padding-${c[0]}: ${t*d}px;padding-${c[1]}: ${t*f}px;margin-${c[0]}: ${t*h}px;margin-${c[1]}: ${t*m}px;border-${c[0]}-width: ${t*p}px;border-${c[1]}-width: ${t*g}px;`}}function ei(t){let e,n,i,s,l;return{c(){e=N("input"),E(e,"class","input input-bordered w-full max-w-xs"),E(e,"type","text"),E(e,"placeholder","Search text...")},m(n,r){M(n,e,r),O(e,t[5]),i=!0,s||(l=[_(e,"input",t[14]),_(e,"keydown",t[15])],s=!0)},p(t,n){32&n&&e.value!==t[5]&&O(e,t[5])},i(t){i||(G((()=>{n||(n=mt(e,ti,{axis:"x"},!0)),n.run(1)})),i=!0)},o(t){n||(n=mt(e,ti,{axis:"x"},!1)),n.run(0),i=!1},d(t){t&&k(e),t&&n&&n.end(),s=!1,r(l)}}}function ni(t){let e;return{c(){e=N("i"),E(e,"class","fa-solid fa-arrow-up")},m(t,n){M(t,e,n)},d(t){t&&k(e)}}}function ii(t){let e;return{c(){e=N("i"),E(e,"class","fa-solid fa-arrow-down")},m(t,n){M(t,e,n)},d(t){t&&k(e)}}}function ri(t){let e,n,i,s,l,a,o,c,u,d,f,h,m,p,g,b,$,y,x,w,S,C,j,T,F,H,V,U,I,P,Y,D,B,W,X,J="text"==t[4]&&ei(t);function K(t,e){return t[6]?ii:ni}let Q=K(t),Z=Q(t);return{c(){e=N("div"),n=N("div"),i=N("label"),i.innerHTML='<span class="label-text">Baseline Text</span>',s=A(),l=N("input"),a=A(),o=N("div"),c=N("label"),c.innerHTML='<span class="label-text">Augmented Text</span>',u=A(),d=N("input"),f=A(),h=N("div"),m=N("label"),m.innerHTML='<span class="label-text">Number Images</span>',p=A(),g=N("div"),b=N("input"),$=A(),y=N("button"),x=z("Query\n                "),w=N("i"),C=A(),j=N("div"),T=N("label"),T.innerHTML='<span class="label-text">Sort Clusters By...</span>',F=A(),H=N("div"),V=N("select"),U=N("option"),U.textContent="Augmented text similarity",I=N("option"),I.textContent="Custom text similarity",P=A(),J&&J.c(),Y=A(),D=N("button"),Z.c(),E(i,"class","label"),E(i,"for","filter-baseline"),E(l,"id","filter-baseline"),E(l,"class","input input-bordered w-full"),E(l,"type","text"),E(l,"placeholder","A photo of a person"),E(n,"class","w-full max-w-xs svelte-18uxpt4"),E(c,"class","label"),E(c,"for","filter-augment"),E(d,"id","filter-augment"),E(d,"class","input input-bordered w-full"),E(d,"type","text"),E(d,"placeholder","A photo of a ceo"),E(o,"class","w-full max-w-xs svelte-18uxpt4"),E(m,"class","label"),E(m,"for","filter-topk"),E(b,"class","input input-bordered w-full"),E(b,"type","number"),E(b,"placeholder","1000"),E(b,"min","2"),E(w,"class","fa-solid fa-sync ml-1"),R(w,"fa-spin",!t[0]),E(y,"class","btn"),y.disabled=S=t[0]?null:"disabled",E(y,"type","submit"),E(g,"id","filter-topk"),E(g,"class","input-group"),E(h,"class","w-full max-w-xs svelte-18uxpt4"),E(T,"class","label"),E(T,"for","sort"),U.__value="mean",U.value=U.__value,U.selected=!0,I.__value="text",I.value=I.__value,E(V,"class","select select-bordered"),void 0===t[4]&&G((()=>t[13].call(V))),E(D,"class","btn"),E(H,"id","sort"),E(H,"class","input-group"),E(j,"class","w-full svelte-18uxpt4"),E(e,"id","controls"),E(e,"class","form-control w-full svelte-18uxpt4")},m(r,k){M(r,e,k),v(e,n),v(n,i),v(n,s),v(n,l),O(l,t[1]),v(e,a),v(e,o),v(o,c),v(o,u),v(o,d),O(d,t[2]),v(e,f),v(e,h),v(h,m),v(h,p),v(h,g),v(g,b),O(b,t[3]),v(g,$),v(g,y),v(y,x),v(y,w),v(e,C),v(e,j),v(j,T),v(j,F),v(j,H),v(H,V),v(V,U),v(V,I),q(V,t[4]),v(H,P),J&&J.m(H,null),v(H,Y),v(H,D),Z.m(D,null),B=!0,W||(X=[_(l,"input",t[10]),_(d,"input",t[11]),_(b,"input",t[12]),_(y,"click",t[7]),_(V,"change",t[13]),_(V,"change",t[8]),_(D,"click",t[9])],W=!0)},p(t,[e]){2&e&&l.value!==t[1]&&O(l,t[1]),4&e&&d.value!==t[2]&&O(d,t[2]),8&e&&L(b.value)!==t[3]&&O(b,t[3]),1&e&&R(w,"fa-spin",!t[0]),(!B||1&e&&S!==(S=t[0]?null:"disabled"))&&(y.disabled=S),16&e&&q(V,t[4]),"text"==t[4]?J?(J.p(t,e),16&e&&dt(J,1)):(J=ei(t),J.c(),dt(J,1),J.m(H,Y)):J&&(ct(),ft(J,1,1,(()=>{J=null})),ut()),Q!==(Q=K(t))&&(Z.d(1),Z=Q(t),Z&&(Z.c(),Z.m(D,null)))},i(t){B||(dt(J),B=!0)},o(t){ft(J),B=!1},d(t){t&&k(e),J&&J.d(),Z.d(),W=!1,r(X)}}}function si(t,e,n){const i=B();let{enableFilter:r}=e,s=null,l=null,a=null,o="mean",c=null,u=!0;function d(){i("sort",{sortKey:o,sortText:c,sortReverse:u})}return t.$$set=t=>{"enableFilter"in t&&n(0,r=t.enableFilter)},[r,s,l,a,o,c,u,function(){null!=s&&null!=l&&null!=a?i("filter",{baseline:s,augment:l,topk:a,sortKey:o,sortReverse:u}):console.log("Null values...")},d,function(){n(6,u=!u),i("reverse")},function(){s=this.value,n(1,s)},function(){l=this.value,n(2,l)},function(){a=L(this.value),n(3,a)},function(){o=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(4,o)},function(){c=this.value,n(5,c)},t=>{"Enter"==t.key&&d()}]}class li extends Mt{constructor(t){super(),wt(this,t,si,ri,l,{enableFilter:0})}}const ai=t=>({}),oi=t=>({}),ci=t=>({}),ui=t=>({});function di(t){let e,n,i,s,l,a,o,u,m,p,g,b,$,y,x;const w=t[3].title,S=c(w,t,t[2],ui),C=t[3].content,j=c(C,t,t[2],oi);return{c(){e=N("div"),n=N("input"),i=A(),s=N("div"),l=N("div"),a=N("span"),o=z(t[0]),u=A(),S&&S.c(),m=A(),p=N("div"),g=A(),b=N("div"),j&&j.c(),E(n,"type","checkbox"),E(a,"class","indicator-item badge badge-primary"),E(l,"class","indicator"),E(p,"class","divider"),E(s,"class","collapse-title text-2xl font-medium"),E(b,"class","collapse-content svelte-wnf2nf"),R(b,"no-max-height",t[1]),E(e,"tabindex","0"),E(e,"class","collapse collapse-arrow")},m(r,c){M(r,e,c),v(e,n),n.checked=t[1],v(e,i),v(e,s),v(s,l),v(l,a),v(a,o),v(l,u),S&&S.m(l,null),v(s,m),v(s,p),v(e,g),v(e,b),j&&j.m(b,null),$=!0,y||(x=[_(n,"change",t[4]),_(l,"click",fi)],y=!0)},p(t,[e]){2&e&&(n.checked=t[1]),(!$||1&e)&&T(o,t[0]),S&&S.p&&(!$||4&e)&&f(S,w,t,t[2],$?d(w,t[2],e,ci):h(t[2]),ui),j&&j.p&&(!$||4&e)&&f(j,C,t,t[2],$?d(C,t[2],e,ai):h(t[2]),oi),2&e&&R(b,"no-max-height",t[1])},i(t){$||(dt(S,t),dt(j,t),$=!0)},o(t){ft(S,t),ft(j,t),$=!1},d(t){t&&k(e),S&&S.d(t),j&&j.d(t),y=!1,r(x)}}}const fi=t=>t.target.parentElement.previousElementSibling.click();function hi(t,e,n){let{$$slots:i={},$$scope:r}=e,{badge:s}=e,l=!0;return t.$$set=t=>{"badge"in t&&n(0,s=t.badge),"$$scope"in t&&n(2,r=t.$$scope)},[s,l,r,i,function(){l=this.checked,n(1,l)}]}class mi extends Mt{constructor(t){super(),wt(this,t,hi,di,l,{badge:0})}}function pi(t,e,n){const i=t.slice();return i[47]=e[n][0],i[48]=e[n][1],i}function gi(t,e,n){const i=t.slice();return i[51]=e[n],i}function bi(t,e,n){const i=t.slice();return i[51]=e[n],i[54]=e,i[55]=n,i}function $i(e){let n;return{c(){n=N("span"),n.textContent="Slices",E(n,"slot","title")},m(t,e){M(t,n,e)},p:t,d(t){t&&k(n)}}}function yi(t){let e,n,i,r,s,l,a,o,c;function u(){t[34].call(i,t[51])}return s=new Gn({props:{cluster:t[51],scaleMean:t[3],scaleVariance:t[5],scaleSize:t[4],baseline:t[9],augment:t[10],name:t[16][t[51].id]}}),s.$on("deleteCluster",(function(){return t[35](t[51])})),s.$on("addImage",(function(...e){return t[36](t[51],...e)})),s.$on("deleteImage",(function(...e){return t[37](t[51],...e)})),{c(){e=N("div"),n=N("h2"),i=N("input"),r=A(),$t(s.$$.fragment),l=A(),E(i,"type","text"),E(i,"class","input input-ghost input-lg w-full max-w-md"),F(i,"font-weight","bold",1),E(n,"class","text-xl font-bold"),E(e,"class","my-14")},m(d,f){M(d,e,f),v(e,n),v(n,i),O(i,t[16][t[51].id]),v(e,r),yt(s,e,null),v(e,l),a=!0,o||(c=_(i,"input",u),o=!0)},p(e,n){t=e,65538&n[0]&&i.value!==t[16][t[51].id]&&O(i,t[16][t[51].id]);const r={};2&n[0]&&(r.cluster=t[51]),8&n[0]&&(r.scaleMean=t[3]),32&n[0]&&(r.scaleVariance=t[5]),16&n[0]&&(r.scaleSize=t[4]),512&n[0]&&(r.baseline=t[9]),1024&n[0]&&(r.augment=t[10]),65538&n[0]&&(r.name=t[16][t[51].id]),s.$set(r)},i(t){a||(dt(s.$$.fragment,t),a=!0)},o(t){ft(s.$$.fragment,t),a=!1},d(t){t&&k(e),vt(s),o=!1,c()}}}function vi(t,e){let n,i,r,s=e[51].isUserList&&e[51].isDisplayed&&yi(e);return{key:t,first:null,c(){n=j(),s&&s.c(),i=j(),this.first=n},m(t,e){M(t,n,e),s&&s.m(t,e),M(t,i,e),r=!0},p(t,n){(e=t)[51].isUserList&&e[51].isDisplayed?s?(s.p(e,n),2&n[0]&&dt(s,1)):(s=yi(e),s.c(),dt(s,1),s.m(i.parentNode,i)):s&&(ct(),ft(s,1,1,(()=>{s=null})),ut())},i(t){r||(dt(s),r=!0)},o(t){ft(s),r=!1},d(t){t&&k(n),s&&s.d(t),t&&k(i)}}}function xi(t){let e,n,i=[],r=new Map,s=t[1];const l=t=>t[51].id;for(let e=0;e<s.length;e+=1){let n=bi(t,s,e),a=l(n);r.set(a,i[e]=vi(a,n))}return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=j()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);M(t,e,r),n=!0},p(t,n){109119034&n[0]&&(s=t[1],ct(),i=gt(i,n,l,1,t,s,r,e.parentNode,pt,vi,e,bi),ut())},i(t){if(!n){for(let t=0;t<s.length;t+=1)dt(i[t]);n=!0}},o(t){for(let t=0;t<i.length;t+=1)ft(i[t]);n=!1},d(t){for(let e=0;e<i.length;e+=1)i[e].d(t);t&&k(e)}}}function wi(t){let e,n,i;return{c(){e=z("("),n=z(t[8]),i=z(")")},m(t,r){M(t,e,r),M(t,n,r),M(t,i,r)},p(t,e){256&e[0]&&T(n,t[8])},d(t){t&&k(e),t&&k(n),t&&k(i)}}}function Mi(t){let e,n,i=t[1].length>0&&wi(t);return{c(){e=N("span"),n=z("Clusters "),i&&i.c(),E(e,"slot","title")},m(t,r){M(t,e,r),v(e,n),i&&i.m(e,null)},p(t,n){t[1].length>0?i?i.p(t,n):(i=wi(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(t){t&&k(e),i&&i.d()}}}function ki(t){let e,n;return e=new Gn({props:{cluster:t[51],scaleMean:t[3],scaleVariance:t[5],scaleSize:t[4]}}),{c(){$t(e.$$.fragment)},m(t,i){yt(e,t,i),n=!0},p(t,n){const i={};2&n[0]&&(i.cluster=t[51]),8&n[0]&&(i.scaleMean=t[3]),32&n[0]&&(i.scaleVariance=t[5]),16&n[0]&&(i.scaleSize=t[4]),e.$set(i)},i(t){n||(dt(e.$$.fragment,t),n=!0)},o(t){ft(e.$$.fragment,t),n=!1},d(t){vt(e,t)}}}function Si(t,e){let n,i,r,s=!e[51].isUserList&&e[51].isDisplayed&&ki(e);return{key:t,first:null,c(){n=j(),s&&s.c(),i=j(),this.first=n},m(t,e){M(t,n,e),s&&s.m(t,e),M(t,i,e),r=!0},p(t,n){!(e=t)[51].isUserList&&e[51].isDisplayed?s?(s.p(e,n),2&n[0]&&dt(s,1)):(s=ki(e),s.c(),dt(s,1),s.m(i.parentNode,i)):s&&(ct(),ft(s,1,1,(()=>{s=null})),ut())},i(t){r||(dt(s),r=!0)},o(t){ft(s),r=!1},d(t){t&&k(n),s&&s.d(t),t&&k(i)}}}function Ni(t){let e,n,i=[],r=new Map,s=t[1];const l=t=>t[51].id;for(let e=0;e<s.length;e+=1){let n=gi(t,s,e),a=l(n);r.set(a,i[e]=Si(a,n))}return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=j()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);M(t,e,r),n=!0},p(t,n){58&n[0]&&(s=t[1],ct(),i=gt(i,n,l,1,t,s,r,e.parentNode,pt,Si,e,gi),ut())},i(t){if(!n){for(let t=0;t<s.length;t+=1)dt(i[t]);n=!0}},o(t){for(let t=0;t<i.length;t+=1)ft(i[t]);n=!1},d(t){for(let e=0;e<i.length;e+=1)i[e].d(t);t&&k(e)}}}function Ci(t){let e,n,i,r,s,l=t[48]+"";function a(){return t[40](t[47])}return{c(){e=N("li"),n=N("button"),i=z(l),E(n,"onclick","this.blur();")},m(t,l){M(t,e,l),v(e,n),v(n,i),r||(s=_(n,"click",a),r=!0)},p(e,n){t=e,65536&n[0]&&l!==(l=t[48]+"")&&T(i,l)},d(t){t&&k(e),r=!1,s()}}}function zi(t){let e,n,i,s,l,a,o,c,u,d,f,h,m,p,g,b,$,y,x,w,C,j,L,F,q,H,V,U,I,P,Y,D,B,W,J,K,Q,Z,G,et,nt,it,rt,st,lt,at=t[17].length+"";function ot(e){t[29](e)}e=new li({props:{enableFilter:t[2]}}),e.$on("filter",t[18]),e.$on("sort",t[27]),e.$on("reverse",t[20]);let ct={fieldName:"mean"};function ut(e){t[31](e)}void 0!==t[0].mean&&(ct.bounds=t[0].mean),a=new on({props:ct}),t[28](a),X.push((()=>bt(a,"bounds",ot)));let ht={fieldName:"variance",scaleY:"symlog"};function mt(e){t[33](e)}void 0!==t[0].variance&&(ht.bounds=t[0].variance),u=new on({props:ht}),t[30](u),X.push((()=>bt(u,"bounds",ut)));let pt={fieldName:"size",scaleY:"symlog"};void 0!==t[0].size&&(pt.bounds=t[0].size),h=new on({props:pt}),t[32](h),X.push((()=>bt(h,"bounds",mt))),g=new mi({props:{badge:t[7],$$slots:{content:[xi],title:[$i]},$$scope:{ctx:t}}}),$=new mi({props:{badge:t[6],$$slots:{content:[Ni],title:[Mi]},$$scope:{ctx:t}}});let gt=Object.entries(t[16]),xt=[];for(let e=0;e<gt.length;e+=1)xt[e]=Ci(pi(t,gt,e));return{c(){$t(e.$$.fragment),n=A(),i=N("br"),s=A(),l=N("div"),$t(a.$$.fragment),c=A(),$t(u.$$.fragment),f=A(),$t(h.$$.fragment),p=A(),$t(g.$$.fragment),b=A(),$t($.$$.fragment),y=A(),x=N("div"),w=N("div"),C=N("label"),j=z("Add to Slice ("),L=z(at),F=z(")"),q=A(),H=N("ul"),V=N("li"),U=N("button"),U.innerHTML='<i class="fa-solid fa-plus"></i>\n\t\t\t\t\tCreate a Slice',I=A();for(let t=0;t<xt.length;t+=1)xt[t].c();P=A(),Y=N("button"),Y.textContent="Clear Selection",D=A(),B=N("div"),W=N("div"),J=N("h3"),J.textContent="Create a new Slice",K=A(),Q=N("input"),Z=A(),G=N("div"),et=N("button"),et.textContent="Cancel",nt=A(),it=N("button"),it.textContent="Create Slice",E(C,"class","btn m-1"),R(C,"btn-disabled",0==t[17].length),E(H,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52 min-w-max"),E(w,"class","dropdown dropdown-top"),R(w,"dropdown-hover",t[17].length>0),E(Y,"class","btn"),R(Y,"btn-disabled",0==t[17].length),E(x,"class","fixed flex items-center bottom-14 left-14 w-1/2 z-10"),E(J,"class","text-lg font-bold"),E(Q,"type","text"),E(Q,"placeholder","Slice name"),E(Q,"class","input input-bordered w-full my-4 min-w-full"),E(et,"class","btn m-1"),E(it,"class","btn btn-primary"),R(it,"btn-disabled",""==t[15]),E(G,"class","flex items-center justify-end"),E(W,"class","modal-box relative"),E(B,"class","modal"),R(B,"modal-open",t[14])},m(r,o){yt(e,r,o),M(r,n,o),M(r,i,o),M(r,s,o),M(r,l,o),yt(a,l,null),v(l,c),yt(u,l,null),v(l,f),yt(h,l,null),M(r,p,o),yt(g,r,o),M(r,b,o),yt($,r,o),M(r,y,o),M(r,x,o),v(x,w),v(w,C),v(C,j),v(C,L),v(C,F),v(w,q),v(w,H),v(H,V),v(V,U),v(H,I);for(let t=0;t<xt.length;t+=1)xt[t].m(H,null);v(x,P),v(x,Y),M(r,D,o),M(r,B,o),v(B,W),v(W,J),v(W,K),v(W,Q),O(Q,t[15]),v(W,Z),v(W,G),v(G,et),v(G,nt),v(G,it),rt=!0,st||(lt=[_(C,"click",t[38]),_(U,"click",t[39]),_(Y,"click",t[21]),_(Q,"input",t[41]),_(et,"click",t[42]),_(it,"click",t[22])],st=!0)},p(t,n){const i={};4&n[0]&&(i.enableFilter=t[2]),e.$set(i);const r={};!o&&1&n[0]&&(o=!0,r.bounds=t[0].mean,tt((()=>o=!1))),a.$set(r);const s={};!d&&1&n[0]&&(d=!0,s.bounds=t[0].variance,tt((()=>d=!1))),u.$set(s);const l={};!m&&1&n[0]&&(m=!0,l.bounds=t[0].size,tt((()=>m=!1))),h.$set(l);const c={};128&n[0]&&(c.badge=t[7]),67130&n[0]|33554432&n[1]&&(c.$$scope={dirty:n,ctx:t}),g.$set(c);const f={};if(64&n[0]&&(f.badge=t[6]),314&n[0]|33554432&n[1]&&(f.$$scope={dirty:n,ctx:t}),$.$set(f),(!rt||131072&n[0])&&at!==(at=t[17].length+"")&&T(L,at),131072&n[0]&&R(C,"btn-disabled",0==t[17].length),16842752&n[0]){let e;for(gt=Object.entries(t[16]),e=0;e<gt.length;e+=1){const i=pi(t,gt,e);xt[e]?xt[e].p(i,n):(xt[e]=Ci(i),xt[e].c(),xt[e].m(H,null))}for(;e<xt.length;e+=1)xt[e].d(1);xt.length=gt.length}131072&n[0]&&R(w,"dropdown-hover",t[17].length>0),131072&n[0]&&R(Y,"btn-disabled",0==t[17].length),32768&n[0]&&Q.value!==t[15]&&O(Q,t[15]),32768&n[0]&&R(it,"btn-disabled",""==t[15]),16384&n[0]&&R(B,"modal-open",t[14])},i(t){rt||(dt(e.$$.fragment,t),dt(a.$$.fragment,t),dt(u.$$.fragment,t),dt(h.$$.fragment,t),dt(g.$$.fragment,t),dt($.$$.fragment,t),rt=!0)},o(t){ft(e.$$.fragment,t),ft(a.$$.fragment,t),ft(u.$$.fragment,t),ft(h.$$.fragment,t),ft(g.$$.fragment,t),ft($.$$.fragment,t),rt=!1},d(o){vt(e,o),o&&k(n),o&&k(i),o&&k(s),o&&k(l),t[28](null),vt(a),t[30](null),vt(u),t[32](null),vt(h),o&&k(p),vt(g,o),o&&k(b),vt($,o),o&&k(y),o&&k(x),S(xt,o),o&&k(D),o&&k(B),st=!1,r(lt)}}}function Ai(t,e,n){return e<=t&&t<=n}function ji(t,e){let n=!e.mean||Ai(t.mean,...e.mean),i=!e.variance||Ai(t.variance,...e.variance),r=!e.size||Ai(t.size,...e.size);return n&&i&&r}function _i(t,e,n){let i,r;o(t,wn,(t=>n(1,i=t))),o(t,Mn,(t=>n(17,r=t)));let s,l,a,c=!0,u={mean:null,variance:null,size:null},d=nn().domain([0,1]),f=nn(),h=nn(),p=null,g=null,b="",$="",y="",v=0,x=!1,w="",M={};async function k(t,e){return"text"==t.detail.sortKey&&null!=t.detail.sortText?await fetch("./textrank",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({text:t.detail.sortText})}).then((t=>t.json())).then((function(t){e.sort((function(e,n){let i=t[e.id],r=t[n.id];return i<r?-1:i>r?1:0}))})):e.sort((function(e,n){let i=e[t.detail.sortKey],r=n[t.detail.sortKey];return i<r?-1:i>r?1:0})),t.detail.sortReverse&&e.reverse(),null==t.detail.sortText&&(t.detail.sortText=""),"text"!=t.detail.sortKey&&t.detail.sortReverse?n(8,b=`More "${y}" → Less "${y}"`):"text"==t.detail.sortKey||t.detail.sortReverse?"text"==t.detail.sortKey&&t.detail.sortReverse?n(8,b=`More "${t.detail.sortText}" → Less "${t.detail.sortText}"`):"text"!=t.detail.sortKey||t.detail.sortReverse||n(8,b=`Less "${t.detail.sortText}" → More "${t.detail.sortText}"`):n(8,b=`Less "${y}" → More "${y}"`),e}function S(){for(let t=0;t<i.length;t++){let e=i[t];for(let t=0;t<e.images.length;t++)e.images[t].selected=!1}wn.set(i)}function N(){let t=Math.max(...i.map((t=>t.variance))),e=Math.max(...i.map((t=>t.size))),r=[0,document.getElementsByClassName("cluster-summary")[0].clientWidth-115];n(3,d=d.range(r)),n(5,h=h.domain([0,t]).range(r)),n(4,f=f.domain([0,e]).range(r))}function C(t){fetch("./remlist",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify(t)}).then((function(){delete M[t.id],n(16,M),m(wn,i=i.filter((e=>e.id!=t.id)),i),N()}))}function z(t){let e=i.filter((e=>e.id==t))[0],n=[];for(let t=0;t<r.length;t++){let i=r[t];~e.images.includes(i)&&n.push(i)}E(e,[...new Set([...e.images,...n])])}function A(t,e){for(let n=0;n<i.length;n++)for(let r=0;r<i[n].images.length;r++){let s=i[n].images[r];if(s.iid==e.iid){E(t,[...new Set([...t.images,s])]);break}}}function j(t,e){for(let n=0;n<i.length;n++)for(let r=0;r<i[n].images.length;r++){let s=i[n].images[r];if(s.iid==e.iid){_(t,s);break}}}function _(t,e){1==t.images.length?C(t):E(t,t.images.filter((t=>t!=e)))}function E(t,e){fetch("./updateuserlist",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({c:t.id,idxs:e.map((t=>t.idx))})}).then((t=>t.json())).then((function(n){t.mean=n.mean,t.variance=n.variance,t.size=n.size,t.images=e,wn.set(i)})).then((function(){let t=Math.max(...i.map((t=>t.variance))),e=Math.max(...i.map((t=>t.size))),r=[0,document.getElementsByClassName("cluster-summary")[0].clientWidth-115];n(3,d=d.range(r)),n(5,h=h.domain([0,t]).range(r)),n(4,f=f.domain([0,e]).range(r)),S()}))}return t.$$.update=()=>{if(195&t.$$.dirty[0]){let t;n(6,p=0),n(7,g=0);for(let e=0;e<i.length;e++){let r=i[e];r.isUserList?(r.isDisplayed=!0,n(7,g+=1)):(t=ji(r,u),r.isDisplayed=t,n(6,p+=t))}wn.set(i)}},[u,i,c,d,f,h,p,g,b,$,y,s,l,a,x,w,M,r,function(t){n(2,c=!1),n(16,M={}),n(9,$=t.detail.baseline),n(10,y=t.detail.augment),v=t.detail.topk,fetch("./filter",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({baseline:$,augment:y,k:v,w:.95,dt:.18})}).then((t=>t.json())).then((function(e){let i=e;for(let t=0;t<i.length;t++)i[t].showMore=!1,i[t].showSimilar=!1,i[t].showCounter=!1,i[t].isDisplayed=!0,i[t].isUserList=!1;k(t,i).then((function(t){wn.set(t)})).then((function(){N()})),n(2,c=!0),s.updateHistogram(i),l.updateHistogram(i),a.updateHistogram(i)}))},k,function(t){n(8,b=b.split("→").reverse().join("→")),wn.update((t=>t.reverse()))},S,function(){fetch("./userlist",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({idxs:r.map((t=>t.idx))})}).then((t=>t.json())).then((function(t){t.showMore=!1,t.showSimilar=!1,t.showCounter=!1,t.isDisplayed=!0,t.isUserList=!0,t.images=r,n(16,M[t.id]=w,M),m(wn,i=[...i,t],i)})).then((function(){N(),S(),n(14,x=!1)}))},C,z,A,j,t=>k(t,i).then((t=>wn.set(t))),function(t){X[t?"unshift":"push"]((()=>{s=t,n(11,s)}))},function(e){t.$$.not_equal(u.mean,e)&&(u.mean=e,n(0,u))},function(t){X[t?"unshift":"push"]((()=>{l=t,n(12,l)}))},function(e){t.$$.not_equal(u.variance,e)&&(u.variance=e,n(0,u))},function(t){X[t?"unshift":"push"]((()=>{a=t,n(13,a)}))},function(e){t.$$.not_equal(u.size,e)&&(u.size=e,n(0,u))},function(t){M[t.id]=this.value,n(16,M)},t=>C(t),(t,e)=>A(t,e.detail.image),(t,e)=>j(t,e.detail.image),()=>{n(14,x=!0),n(15,w="")},()=>{n(14,x=!0),n(15,w="")},t=>z(t),function(){w=this.value,n(15,w)},()=>n(14,x=!1)]}class Ei extends Mt{constructor(t){super(),wt(this,t,_i,zi,l,{},null,[-1,-1])}}function Li(t){let e,n,i,s,l,a,o,c,u,d,f,h,m,p,g,b,$,y,x,w,S,C,z,j,L,T,O,q,H,V,U,I,P,Y,D,B,W,X,J,K,Q,Z;return c=new Ei({}),{c(){e=N("main"),n=N("div"),i=N("h1"),i.textContent="VLSlice",s=A(),l=N("label"),l.textContent="Help",a=A(),o=N("div"),$t(c.$$.fragment),u=A(),d=N("div"),f=N("div"),h=N("h3"),h.textContent="ICCV 2023 VLSlice Demo",m=A(),p=N("br"),g=A(),b=N("b"),b.innerHTML="<h4>Step 1: Query subjects and bias domain</h4>",$=A(),y=N("p"),y.textContent='Enter baseline (A subject, e.g., "A photo of a person") \n\t\t\t\tand augmented texts (A bias, e.g., "A photo of a CEO") \n\t\t\t\tto study, and the number of images\n\t\t\t\tfor top-k filtering (recommend 2000). \n\t\t\t\tClick "Query" to run clustering, calculate ΔC, and output candidate slices.',x=A(),w=N("br"),S=A(),C=N("b"),C.innerHTML="<h4>Step 2: Explore visiolinguistic clusters</h4>",z=A(),j=N("p"),j.textContent='Clusters are default sorted by most positive affinity with the bias (large green bar) to most\n\t\t\t\tnegative affinity (large red bar). Clusters can be cross filtered by click-dragging regions in the cluster\n\t\t\t\tstatistic histograms. Changing "Sort clusters by" on the top right allows search by arbitrary text. Click images\n\t\t\t\tto select them and mouse over "Add to slice" then click "Create a new slice" to create a new slice from them.',L=A(),T=N("br"),O=A(),q=N("b"),q.innerHTML="<h4>Step 3: Refine clusters by gathering supporting examples</h4>",H=A(),V=N("p"),V.textContent='Click "Show Similar" and "Show counterfactual" on the right to display lists of similar and counterfactual clusters to your slice. \n\t\t\t\tIf many samples have been added, optionally click "Show More" to un/hide additional samples. With images selected, \n\t\t\t\tmouse over "Add to slice" then select "[YOUR_SLICE_NAME]" to add them to a slice.',U=A(),I=N("br"),P=A(),Y=N("b"),Y.innerHTML="<h4>Step 4: Validate model behavior</h4>",D=A(),B=N("p"),B.textContent='Select "Show Correlation" to show a scatter plot displaying image similarity with slice centroids against affinity. A positive/negative slope\n\t\t\t\tis indicitive of negative bias association. Clicking individual points in this plot will add/remove them from the slice.',W=A(),X=N("div"),J=N("button"),J.textContent="Close",E(i,"class","normal-case text-4xl p-4"),E(l,"class","btn m-1"),E(n,"class","navbar bg-neutral text-neutral-content flex justify-between"),E(o,"id","content"),E(o,"class","p-4"),E(h,"class","text-lg font-bold"),F(y,"width","100%"),F(j,"width","100%"),F(V,"width","100%"),F(B,"width","100%"),E(J,"class","btn m-1"),E(X,"class","flex items-center justify-end"),E(f,"class","modal-box relative"),E(d,"class","modal"),R(d,"modal-open",t[0]),E(e,"class","max-w-none relative")},m(r,k){M(r,e,k),v(e,n),v(n,i),v(n,s),v(n,l),v(e,a),v(e,o),yt(c,o,null),v(e,u),v(e,d),v(d,f),v(f,h),v(f,m),v(f,p),v(f,g),v(f,b),v(f,$),v(f,y),v(f,x),v(f,w),v(f,S),v(f,C),v(f,z),v(f,j),v(f,L),v(f,T),v(f,O),v(f,q),v(f,H),v(f,V),v(f,U),v(f,I),v(f,P),v(f,Y),v(f,D),v(f,B),v(f,W),v(f,X),v(X,J),K=!0,Q||(Z=[_(l,"click",t[1]),_(J,"click",t[2])],Q=!0)},p(t,[e]){1&e&&R(d,"modal-open",t[0])},i(t){K||(dt(c.$$.fragment,t),K=!0)},o(t){ft(c.$$.fragment,t),K=!1},d(t){t&&k(e),vt(c),Q=!1,r(Z)}}}function Ti(t,e,n){let i=!0;return[i,()=>{n(0,i=!0)},()=>n(0,i=!1)]}return new class extends Mt{constructor(t){super(),wt(this,t,Ti,Li,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
