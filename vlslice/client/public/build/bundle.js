var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function i(){return Object.create(null)}function r(e){e.forEach(n)}function s(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function o(e,t,n){e.$$.on_destroy.push(a(t,n))}function c(e,t,n,i){if(e){const r=u(e,t,n,i);return e[0](r)}}function u(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function d(e,t,n,i){if(e[2]&&i){const r=e[2](i(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|r[i];return e}return t.dirty|r}return t.dirty}function f(e,t,n,i,r,s){if(r){const l=u(t,n,i,s);e.p(l,r)}}function h(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function m(e,t,n){return e.set(n),t}const p="undefined"!=typeof window;let g=p?()=>window.performance.now():()=>Date.now(),b=p?e=>requestAnimationFrame(e):e;const $=new Set;function y(e){$.forEach((t=>{t.c(e)||($.delete(t),t.f())})),0!==$.size&&b(y)}function v(e,t){e.appendChild(t)}function x(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function w(e){const t=S("style");return function(e,t){v(e.head||e,t)}(x(e),t),t.sheet}function M(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode.removeChild(e)}function N(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function C(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function z(e){return document.createTextNode(e)}function L(){return z(" ")}function j(){return z("")}function _(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function A(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function E(e){return""===e?null:+e}function T(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function O(e,t){e.value=null==t?"":t}function F(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function q(e,t){for(let n=0;n<e.options.length;n+=1){const i=e.options[n];if(i.__value===t)return void(i.selected=!0)}e.selectedIndex=-1}function R(e,t,n){e.classList[n?"add":"remove"](t)}function U(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}const V=new Map;let H,P=0;function I(e,t,n,i,r,s,l,a=0){const o=16.666/i;let c="{\n";for(let e=0;e<=1;e+=o){const i=t+(n-t)*s(e);c+=100*e+`%{${l(i,1-i)}}\n`}const u=c+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,f=x(e),{stylesheet:h,rules:m}=V.get(f)||function(e,t){const n={stylesheet:w(t),rules:{}};return V.set(e,n),n}(f,e);m[d]||(m[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${d} ${i}ms linear ${r}ms 1 both`,P+=1,d}function Y(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-i.length;r&&(e.style.animation=i.join(", "),P-=r,P||b((()=>{P||(V.forEach((e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}})),V.clear())})))}function D(e){H=e}function B(){const e=function(){if(!H)throw new Error("Function called outside component initialization");return H}();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=U(t,n,{cancelable:i});return r.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}const X=[],J=[],K=[],W=[],G=Promise.resolve();let Q=!1;function Z(e){K.push(e)}function ee(e){W.push(e)}const te=new Set;let ne,ie=0;function re(){const e=H;do{for(;ie<X.length;){const e=X[ie];ie++,D(e),se(e.$$)}for(D(null),X.length=0,ie=0;J.length;)J.pop()();for(let e=0;e<K.length;e+=1){const t=K[e];te.has(t)||(te.add(t),t())}K.length=0}while(X.length);for(;W.length;)W.pop()();Q=!1,te.clear(),D(e)}function se(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Z)}}function le(e,t,n){e.dispatchEvent(U(`${t?"intro":"outro"}${n}`))}const ae=new Set;let oe;function ce(){oe={r:0,c:[],p:oe}}function ue(){oe.r||r(oe.c),oe=oe.p}function de(e,t){e&&e.i&&(ae.delete(e),e.i(t))}function fe(e,t,n,i){if(e&&e.o){if(ae.has(e))return;ae.add(e),oe.c.push((()=>{ae.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}const he={duration:0};function me(n,i,l,a){let o=i(n,l),c=a?0:1,u=null,d=null,f=null;function h(){f&&Y(n,f)}function m(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function p(i){const{delay:s=0,duration:l=300,easing:a=t,tick:p=e,css:v}=o||he,x={start:g()+s,b:i};i||(x.group=oe,oe.r+=1),u||d?d=x:(v&&(h(),f=I(n,c,i,l,s,a,v)),i&&p(0,1),u=m(x,l),Z((()=>le(n,i,"start"))),function(e){let t;0===$.size&&b(y),new Promise((n=>{$.add(t={c:e,f:n})}))}((e=>{if(d&&e>d.start&&(u=m(d,l),d=null,le(n,u.b,"start"),v&&(h(),f=I(n,c,u.b,u.duration,0,a,o.css))),u)if(e>=u.end)p(c=u.b,1-c),le(n,u.b,"end"),d||(u.b?h():--u.group.r||r(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),p(c,1-c)}return!(!u&&!d)})))}return{run(e){s(o)?(ne||(ne=Promise.resolve(),ne.then((()=>{ne=null}))),ne).then((()=>{o=o(),p(e)})):p(e)},end(){h(),u=d=null}}}function pe(e,t){fe(e,1,1,(()=>{t.delete(e.key)}))}function ge(e,t,n,i,r,s,l,a,o,c,u,d){let f=e.length,h=s.length,m=f;const p={};for(;m--;)p[e[m].key]=m;const g=[],b=new Map,$=new Map;for(m=h;m--;){const e=d(r,s,m),a=n(e);let o=l.get(a);o?i&&o.p(e,t):(o=c(a,e),o.c()),b.set(a,g[m]=o),a in p&&$.set(a,Math.abs(m-p[a]))}const y=new Set,v=new Set;function x(e){de(e,1),e.m(a,u),l.set(e.key,e),u=e.first,h--}for(;f&&h;){const t=g[h-1],n=e[f-1],i=t.key,r=n.key;t===n?(u=t.first,f--,h--):b.has(r)?!l.has(i)||y.has(i)?x(t):v.has(r)?f--:$.get(i)>$.get(r)?(v.add(i),x(t)):(y.add(r),f--):(o(n,l),f--)}for(;f--;){const t=e[f];b.has(t.key)||o(t,l)}for(;h;)x(g[h-1]);return g}function be(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function $e(e){e&&e.c()}function ye(e,t,i,l){const{fragment:a,on_mount:o,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,i),l||Z((()=>{const t=o.map(n).filter(s);c?c.push(...t):r(t),e.$$.on_mount=[]})),u.forEach(Z)}function ve(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function xe(e,t){-1===e.$$.dirty[0]&&(X.push(e),Q||(Q=!0,G.then(re)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function we(t,n,s,l,a,o,c,u=[-1]){const d=H;D(t);const f=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let h=!1;if(f.ctx=s?s(t,n.props||{},((e,n,...i)=>{const r=i.length?i[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),h&&xe(t,e)),n})):[],f.update(),h=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(k)}else f.fragment&&f.fragment.c();n.intro&&de(t.$$.fragment),ye(t,n.target,n.anchor,n.customElement),re()}D(d)}class Me{$destroy(){ve(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ke(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ne(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Se(e){let t,n,i;function r(e,i,r=0,s=e.length){if(r<s){if(0!==t(i,i))return s;do{const t=r+s>>>1;n(e[t],i)<0?r=t+1:s=t}while(r<s)}return r}return 2!==e.length?(t=ke,n=(t,n)=>ke(e(t),n),i=(t,n)=>e(t)-n):(t=e===ke||e===Ne?e:Ce,n=e,i=e),{left:r,center:function(e,t,n=0,s=e.length){const l=r(e,t,n,s-1);return l>n&&i(e[l-1],t)>-i(e[l],t)?l-1:l},right:function(e,i,r=0,s=e.length){if(r<s){if(0!==t(i,i))return s;do{const t=r+s>>>1;n(e[t],i)<=0?r=t+1:s=t}while(r<s)}return r}}}function Ce(){return 0}const ze=Se(ke).right;Se((function(e){return null===e?NaN:+e})).center;var Le=ze,je=Math.sqrt(50),_e=Math.sqrt(10),Ae=Math.sqrt(2);function Ee(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=je?10:s>=_e?5:s>=Ae?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=je?10:s>=_e?5:s>=Ae?2:1)}function Te(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Oe(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Fe(){}var qe=.7,Re=1/qe,Ue="\\s*([+-]?\\d+)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pe=/^#([0-9a-f]{3,8})$/,Ie=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),Ye=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),De=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${Ve}\\)$`),Be=new RegExp(`^rgba\\(${He},${He},${He},${Ve}\\)$`),Xe=new RegExp(`^hsl\\(${Ve},${He},${He}\\)$`),Je=new RegExp(`^hsla\\(${Ve},${He},${He},${Ve}\\)$`),Ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function We(){return this.rgb().formatHex()}function Ge(){return this.rgb().formatRgb()}function Qe(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ze(t):3===n?new it(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?et(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?et(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ie.exec(e))?new it(t[1],t[2],t[3],1):(t=Ye.exec(e))?new it(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=De.exec(e))?et(t[1],t[2],t[3],t[4]):(t=Be.exec(e))?et(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Xe.exec(e))?ct(t[1],t[2]/100,t[3]/100,1):(t=Je.exec(e))?ct(t[1],t[2]/100,t[3]/100,t[4]):Ke.hasOwnProperty(e)?Ze(Ke[e]):"transparent"===e?new it(NaN,NaN,NaN,0):null}function Ze(e){return new it(e>>16&255,e>>8&255,255&e,1)}function et(e,t,n,i){return i<=0&&(e=t=n=NaN),new it(e,t,n,i)}function tt(e){return e instanceof Fe||(e=Qe(e)),e?new it((e=e.rgb()).r,e.g,e.b,e.opacity):new it}function nt(e,t,n,i){return 1===arguments.length?tt(e):new it(e,t,n,null==i?1:i)}function it(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function rt(){return`#${ot(this.r)}${ot(this.g)}${ot(this.b)}`}function st(){const e=lt(this.opacity);return`${1===e?"rgb(":"rgba("}${at(this.r)}, ${at(this.g)}, ${at(this.b)}${1===e?")":`, ${e})`}`}function lt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function at(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ot(e){return((e=at(e))<16?"0":"")+e.toString(16)}function ct(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new dt(e,t,n,i)}function ut(e){if(e instanceof dt)return new dt(e.h,e.s,e.l,e.opacity);if(e instanceof Fe||(e=Qe(e)),!e)return new dt;if(e instanceof dt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),l=NaN,a=s-r,o=(s+r)/2;return a?(l=t===s?(n-i)/a+6*(n<i):n===s?(i-t)/a+2:(t-n)/a+4,a/=o<.5?s+r:2-s-r,l*=60):a=o>0&&o<1?0:l,new dt(l,a,o,e.opacity)}function dt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function ft(e){return(e=(e||0)%360)<0?e+360:e}function ht(e){return Math.max(0,Math.min(1,e||0))}function mt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Te(Fe,Qe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:We,formatHex:We,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ut(this).formatHsl()},formatRgb:Ge,toString:Ge}),Te(it,nt,Oe(Fe,{brighter(e){return e=null==e?Re:Math.pow(Re,e),new it(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?qe:Math.pow(qe,e),new it(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new it(at(this.r),at(this.g),at(this.b),lt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rt,formatHex:rt,formatHex8:function(){return`#${ot(this.r)}${ot(this.g)}${ot(this.b)}${ot(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:st,toString:st})),Te(dt,(function(e,t,n,i){return 1===arguments.length?ut(e):new dt(e,t,n,null==i?1:i)}),Oe(Fe,{brighter(e){return e=null==e?Re:Math.pow(Re,e),new dt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?qe:Math.pow(qe,e),new dt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new it(mt(e>=240?e-240:e+120,r,i),mt(e,r,i),mt(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new dt(ft(this.h),ht(this.s),ht(this.l),lt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lt(this.opacity);return`${1===e?"hsl(":"hsla("}${ft(this.h)}, ${100*ht(this.s)}%, ${100*ht(this.l)}%${1===e?")":`, ${e})`}`}}));var pt=e=>()=>e;function gt(e){return 1==(e=+e)?bt:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):pt(isNaN(t)?n:t)}}function bt(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):pt(isNaN(e)?t:e)}var $t=function e(t){var n=gt(t);function i(e,t){var i=n((e=nt(e)).r,(t=nt(t)).r),r=n(e.g,t.g),s=n(e.b,t.b),l=bt(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=s(t),e.opacity=l(t),e+""}}return i.gamma=e,i}(1);function yt(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(s){for(n=0;n<i;++n)r[n]=e[n]*(1-s)+t[n]*s;return r}}function vt(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,s=new Array(r),l=new Array(i);for(n=0;n<r;++n)s[n]=Ct(e[n],t[n]);for(;n<i;++n)l[n]=t[n];return function(e){for(n=0;n<r;++n)l[n]=s[n](e);return l}}function xt(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function wt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Mt(e,t){var n,i={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=Ct(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}var kt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nt=new RegExp(kt.source,"g");function St(e,t){var n,i,r,s=kt.lastIndex=Nt.lastIndex=0,l=-1,a=[],o=[];for(e+="",t+="";(n=kt.exec(e))&&(i=Nt.exec(t));)(r=i.index)>s&&(r=t.slice(s,r),a[l]?a[l]+=r:a[++l]=r),(n=n[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,o.push({i:l,x:wt(n,i)})),s=Nt.lastIndex;return s<t.length&&(r=t.slice(s),a[l]?a[l]+=r:a[++l]=r),a.length<2?o[0]?function(e){return function(t){return e(t)+""}}(o[0].x):function(e){return function(){return e}}(t):(t=o.length,function(e){for(var n,i=0;i<t;++i)a[(n=o[i]).i]=n.x(e);return a.join("")})}function Ct(e,t){var n,i,r=typeof t;return null==t||"boolean"===r?pt(t):("number"===r?wt:"string"===r?(n=Qe(t))?(t=n,$t):St:t instanceof Qe?$t:t instanceof Date?xt:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?vt:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Mt:wt:yt))(e,t)}function zt(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Lt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function jt(e){return(e=Lt(Math.abs(e)))?e[1]:NaN}var _t,At=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Et(e){if(!(t=At.exec(e)))throw new Error("invalid format: "+e);var t;return new Tt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Tt(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Ot(e,t){var n=Lt(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Et.prototype=Tt.prototype,Tt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ft={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ot(100*e,t),r:Ot,s:function(e,t){var n=Lt(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(_t=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,l=i.length;return s===l?i:s>l?i+new Array(s-l+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Lt(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qt(e){return e}var Rt,Ut,Vt,Ht=Array.prototype.map,Pt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function It(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?qt:(t=Ht.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,s=[],l=0,a=t[0],o=0;r>0&&a>0&&(o+a+1>i&&(a=Math.max(1,i-o)),s.push(e.substring(r-=a,r+a)),!((o+=a+1)>i));)a=t[l=(l+1)%t.length];return s.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",l=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?qt:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Ht.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Et(e)).fill,n=e.align,d=e.sign,f=e.symbol,h=e.zero,m=e.width,p=e.comma,g=e.precision,b=e.trim,$=e.type;"n"===$?(p=!0,$="g"):Ft[$]||(void 0===g&&(g=12),b=!0,$="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var y="$"===f?r:"#"===f&&/[boxX]/.test($)?"0"+$.toLowerCase():"",v="$"===f?s:/[%p]/.test($)?o:"",x=Ft[$],w=/[defgprs%]/.test($);function M(e){var r,s,o,f=y,M=v;if("c"===$)M=x(e)+M,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),g),b&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),k&&0==+e&&"+"!==d&&(k=!1),f=(k?"("===d?d:c:"-"===d||"("===d?"":d)+f,M=("s"===$?Pt[8+_t/3]:"")+M+(k&&"("===d?")":""),w)for(r=-1,s=e.length;++r<s;)if(48>(o=e.charCodeAt(r))||o>57){M=(46===o?l+e.slice(r+1):e.slice(r))+M,e=e.slice(0,r);break}}p&&!h&&(e=i(e,1/0));var N=f.length+e.length+M.length,S=N<m?new Array(m-N+1).join(t):"";switch(p&&h&&(e=i(S+e,S.length?m-M.length:1/0),S=""),n){case"<":e=f+e+M+S;break;case"=":e=f+S+e+M;break;case"^":e=S.slice(0,N=S.length>>1)+f+e+M+S.slice(N);break;default:e=S+f+e+M}return a(e)}return g=void 0===g?6:/[gprs]/.test($)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return e+""},M}return{format:d,formatPrefix:function(e,t){var n=d(((e=Et(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(jt(t)/3))),r=Math.pow(10,-i),s=Pt[8+i/3];return function(e){return n(r*e)+s}}}}function Yt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Dt(e){return+e}Rt=It({thousands:",",grouping:[3],currency:["$",""]}),Ut=Rt.format,Vt=Rt.formatPrefix;var Bt=[0,1];function Xt(e){return e}function Jt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Kt(e,t,n){var i=e[0],r=e[1],s=t[0],l=t[1];return r<i?(i=Jt(r,i),s=n(l,s)):(i=Jt(i,r),s=n(s,l)),function(e){return s(i(e))}}function Wt(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),l=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<i;)r[l]=Jt(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(t){var n=Le(e,t,1,i)-1;return s[n](r[n](t))}}function Gt(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qt(){var e,t,n,i,r,s,l=Bt,a=Bt,o=Ct,c=Xt;function u(){var e,t,n,o=Math.min(l.length,a.length);return c!==Xt&&(e=l[0],t=l[o-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=o>2?Wt:Kt,r=s=null,d}function d(t){return null==t||isNaN(t=+t)?n:(r||(r=i(l.map(e),a,o)))(e(c(t)))}return d.invert=function(n){return c(t((s||(s=i(a,l.map(e),wt)))(n)))},d.domain=function(e){return arguments.length?(l=Array.from(e,Dt),u()):l.slice()},d.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},d.rangeRound=function(e){return a=Array.from(e),o=zt,u()},d.clamp=function(e){return arguments.length?(c=!!e||Xt,u()):c!==Xt},d.interpolate=function(e){return arguments.length?(o=e,u()):o},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,i){return e=n,t=i,u()}}function Zt(){return Qt()(Xt,Xt)}function en(e,t,n,i){var r,s=function(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=je?r*=10:s>=_e?r*=5:s>=Ae&&(r*=2),t<e?-r:r}(e,t,n);switch((i=Et(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(jt(t)/3)))-jt(Math.abs(e)))}(s,l))||(i.precision=r),Vt(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jt(t)-jt(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(e){return Math.max(0,-jt(Math.abs(e)))}(s))||(i.precision=r-2*("%"===i.type))}return Ut(i)}function tn(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var i,r,s,l,a=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(r=e,e=t,t=r),0===(l=Ee(e,t,n))||!isFinite(l))return[];if(l>0){let n=Math.round(e/l),i=Math.round(t/l);for(n*l<e&&++n,i*l>t&&--i,s=new Array(r=i-n+1);++a<r;)s[a]=(n+a)*l}else{l=-l;let n=Math.round(e*l),i=Math.round(t*l);for(n/l<e&&++n,i/l>t&&--i,s=new Array(r=i-n+1);++a<r;)s[a]=(n+a)/l}return i&&s.reverse(),s}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return en(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,r,s=t(),l=0,a=s.length-1,o=s[l],c=s[a],u=10;for(c<o&&(r=o,o=c,c=r,r=l,l=a,a=r);u-- >0;){if((r=Ee(o,c,n))===i)return s[l]=o,s[a]=c,t(s);if(r>0)o=Math.floor(o/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;o=Math.ceil(o*r)/r,c=Math.floor(c*r)/r}i=r}return e},e}function nn(){var e=Zt();return e.copy=function(){return Gt(e,nn())},Yt.apply(e,arguments),tn(e)}function rn(e,t,n){this.k=e,this.x=t,this.y=n}function sn(t){let n,i;return{c(){n=S("div"),A(n,"id",i="filter-"+t[0])},m(e,t){M(e,n,t)},p(e,[t]){1&t&&i!==(i="filter-"+e[0])&&A(n,"id",i)},i:e,o:e,d(e){e&&k(n)}}}function ln(e){return`hsl(${getComputedStyle(document.querySelector(":root")).getPropertyValue(e)})`}function an(e,t,n){let{fieldName:i}=t,{bounds:r=null}=t,{scaleY:s="linear"}=t;return e.$$set=e=>{"fieldName"in e&&n(0,i=e.fieldName),"bounds"in e&&n(1,r=e.bounds),"scaleY"in e&&n(2,s=e.scaleY)},[i,r,s,function(e){if(0==e.length)return;let t={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:`Histogram for ${i}`,data:{values:e},params:[{name:"select",select:{type:"interval",encoding:["x"]}}],mark:{type:"bar",fill:ln("--n"),stroke:ln("--s")},encoding:{x:{title:i,bin:{maxbins:50},field:i},y:{title:"count",aggregate:"count",scale:{type:s}},strokeWidth:{condition:[{param:"select",empty:!1,value:1}],value:0}}};vegaEmbed(`#filter-${i}`,t,{actions:!1}).then((function(e){e.view.addSignalListener("select",(function(e,t){n(1,r=i in t?t[i]:null)}))}))}]}rn.prototype={constructor:rn,scale:function(e){return 1===e?this:new rn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new rn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new rn(1,0,0);class on extends Me{constructor(e){super(),we(this,e,an,sn,l,{fieldName:0,bounds:1,scaleY:2,updateHistogram:3})}get updateHistogram(){return this.$$.ctx[3]}}function cn(e){const t=e-1;return t*t*t+1}function un(e,{delay:t=0,duration:n=400,easing:i=cn}={}){const r=getComputedStyle(e),s=+r.opacity,l=parseFloat(r.height),a=parseFloat(r.paddingTop),o=parseFloat(r.paddingBottom),c=parseFloat(r.marginTop),u=parseFloat(r.marginBottom),d=parseFloat(r.borderTopWidth),f=parseFloat(r.borderBottomWidth);return{delay:t,duration:n,easing:i,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*s};height: ${e*l}px;padding-top: ${e*a}px;padding-bottom: ${e*o}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*d}px;border-bottom-width: ${e*f}px;`}}function dn(e){let t,n,i,r,s,l,a,o,u,m,p,g,b,$=e[2]&&e[4]>0?"+":"",y=(e[4]%1==0?e[4]:e[4].toFixed(2))+"";const x=e[6].default,w=c(x,e,e[5],null);return{c(){t=C("g"),n=C("text"),w&&w.c(),i=C("rect"),l=C("text"),a=z("("),o=z($),u=z(y),m=z(")"),A(n,"x","65"),A(n,"y","10"),A(n,"dominant-baseline","middle"),A(n,"text-anchor","end"),A(n,"fill","hsl(var(--bc))"),A(i,"x","70"),A(i,"y","5"),A(i,"width",r=e[3](Math.abs(e[4]))),A(i,"height","10"),A(i,"fill",s=e[2]?e[4]>0?"hsl(var(--su))":"hsl(var(--er))":"hsl(var(--n))"),A(l,"x",p=75+e[3](Math.abs(e[4]))),A(l,"y","10"),A(l,"dominant-baseline","middle"),A(l,"fill","hsl(var(--b3))"),A(t,"transform",g="translate("+e[0]+", "+e[1]+")")},m(e,r){M(e,t,r),v(t,n),w&&w.m(n,null),v(t,i),v(t,l),v(l,a),v(l,o),v(l,u),v(l,m),b=!0},p(e,[n]){w&&w.p&&(!b||32&n)&&f(w,x,e,e[5],b?d(x,e[5],n,null):h(e[5]),null),(!b||24&n&&r!==(r=e[3](Math.abs(e[4]))))&&A(i,"width",r),(!b||20&n&&s!==(s=e[2]?e[4]>0?"hsl(var(--su))":"hsl(var(--er))":"hsl(var(--n))"))&&A(i,"fill",s),(!b||20&n)&&$!==($=e[2]&&e[4]>0?"+":"")&&T(o,$),(!b||16&n)&&y!==(y=(e[4]%1==0?e[4]:e[4].toFixed(2))+"")&&T(u,y),(!b||24&n&&p!==(p=75+e[3](Math.abs(e[4]))))&&A(l,"x",p),(!b||3&n&&g!==(g="translate("+e[0]+", "+e[1]+")"))&&A(t,"transform",g)},i(e){b||(de(w,e),b=!0)},o(e){fe(w,e),b=!1},d(e){e&&k(t),w&&w.d(e)}}}function fn(e,t,n){let{$$slots:i={},$$scope:r}=t,{offsetX:s=0}=t,{offsetY:l=0}=t,{signed:a=!1}=t,{scale:o}=t,{value:c}=t;return e.$$set=e=>{"offsetX"in e&&n(0,s=e.offsetX),"offsetY"in e&&n(1,l=e.offsetY),"signed"in e&&n(2,a=e.signed),"scale"in e&&n(3,o=e.scale),"value"in e&&n(4,c=e.value),"$$scope"in e&&n(5,r=e.$$scope)},[s,l,a,o,c,r,i]}class hn extends Me{constructor(e){super(),we(this,e,fn,dn,l,{offsetX:0,offsetY:1,signed:2,scale:3,value:4})}}function mn(e){let t;return{c(){t=z("Mean")},m(e,n){M(e,t,n)},d(e){e&&k(t)}}}function pn(e){let t;return{c(){t=z("Variance")},m(e,n){M(e,t,n)},d(e){e&&k(t)}}}function gn(e){let t;return{c(){t=z("Size")},m(e,n){M(e,t,n)},d(e){e&&k(t)}}}function bn(e){let t,n,i,r,s,l;return n=new hn({props:{offsetY:0,scale:e[1],value:e[0].mean,signed:!0,$$slots:{default:[mn]},$$scope:{ctx:e}}}),i=new hn({props:{offsetY:20,scale:e[2],value:e[0].variance,$$slots:{default:[pn]},$$scope:{ctx:e}}}),r=new hn({props:{offsetY:40,scale:e[3],value:e[0].size,$$slots:{default:[gn]},$$scope:{ctx:e}}}),{c(){t=C("svg"),$e(n.$$.fragment),$e(i.$$.fragment),$e(r.$$.fragment),A(t,"id",s="summary-"+e[0].id),A(t,"width","100%"),A(t,"height","60")},m(e,s){M(e,t,s),ye(n,t,null),ye(i,t,null),ye(r,t,null),l=!0},p(e,[a]){const o={};2&a&&(o.scale=e[1]),1&a&&(o.value=e[0].mean),16&a&&(o.$$scope={dirty:a,ctx:e}),n.$set(o);const c={};4&a&&(c.scale=e[2]),1&a&&(c.value=e[0].variance),16&a&&(c.$$scope={dirty:a,ctx:e}),i.$set(c);const u={};8&a&&(u.scale=e[3]),1&a&&(u.value=e[0].size),16&a&&(u.$$scope={dirty:a,ctx:e}),r.$set(u),(!l||1&a&&s!==(s="summary-"+e[0].id))&&A(t,"id",s)},i(e){l||(de(n.$$.fragment,e),de(i.$$.fragment,e),de(r.$$.fragment,e),l=!0)},o(e){fe(n.$$.fragment,e),fe(i.$$.fragment,e),fe(r.$$.fragment,e),l=!1},d(e){e&&k(t),ve(n),ve(i),ve(r)}}}function $n(e,t,n){let{cluster:i}=t,{scaleMean:r}=t,{scaleVariance:s}=t,{scaleSize:l}=t;return e.$$set=e=>{"cluster"in e&&n(0,i=e.cluster),"scaleMean"in e&&n(1,r=e.scaleMean),"scaleVariance"in e&&n(2,s=e.scaleVariance),"scaleSize"in e&&n(3,l=e.scaleSize)},[i,r,s,l]}class yn extends Me{constructor(e){super(),we(this,e,$n,bn,l,{cluster:0,scaleMean:1,scaleVariance:2,scaleSize:3})}}const vn=[];function xn(t,n=e){let i;const r=new Set;function s(e){if(l(t,e)&&(t=e,i)){const e=!vn.length;for(const e of r)e[1](),vn.push(e,t);if(e){for(let e=0;e<vn.length;e+=2)vn[e][0](vn[e+1]);vn.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(l,a=e){const o=[l,a];return r.add(o),1===r.size&&(i=n(s)||e),l(t),()=>{r.delete(o),0===r.size&&(i(),i=null)}}}}const wn=xn([]),Mn=function(t,n,i){const l=!Array.isArray(t),o=l?[t]:t,c=n.length<2;return u=t=>{let i=!1;const u=[];let d=0,f=e;const h=()=>{if(d)return;f();const i=n(l?u[0]:u,t);c?t(i):f=s(i)?i:e},m=o.map(((e,t)=>a(e,(e=>{u[t]=e,d&=~(1<<t),i&&h()}),(()=>{d|=1<<t}))));return i=!0,h(),function(){r(m),f()}},{subscribe:xn(i,u).subscribe};var u}(wn,(e=>{let t=[];for(let n=0;n<e.length;n++)t.push(...e[n].images.filter((e=>e.selected)));return[...new Set(t)]})),kn="https://d30mxw38m32j53.cloudfront.net";function Nn(e,{root:t=null,rootMargin:n="0px 0px 0px 0px",threshold:i=0}={}){if(window&&"IntersectionObserver"in window){const r=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target;t.dataset.src&&(t.src=t.dataset.src),t.dataset.srcset&&(t.srcset=t.dataset.srcset),r.unobserve(t)}}))}),{root:t,rootMargin:n,threshold:i});return r.observe(e),{destroy(){r&&r.unobserve(e)}}}}function Sn(t){let n,i,r,s;return{c(){n=S("div"),i=S("button"),i.innerHTML='<i class="fa-solid fa-close"></i>',A(i,"class","btn btn-circle btn-outline btn-xs "),A(n,"class","absolute top-1 left-1")},m(e,l){M(e,n,l),v(n,i),r||(s=_(i,"click",t[7]),r=!0)},p:e,d(e){e&&k(n),r=!1,s()}}}function Cn(t){let n,i,l,a,o,c,u,d=t[4]&&Sn(t);return{c(){n=S("div"),i=S("img"),o=L(),d&&d.c(),A(i,"id",l="img-"+t[1]),A(i,"alt","Filtered dataset sample"),A(i,"class","relative svelte-gmcpyq"),A(i,"data-src",a=kn+"/"+t[2]),A(i,"width",t[3]),A(i,"height",t[3]),F(i,"cursor","pointer"),R(i,"selected",t[0]),A(n,"class","relative expand overflow-visible m-0 svelte-gmcpyq")},m(r,l){var a,f;M(r,n,l),v(n,i),v(n,o),d&&d.m(n,null),c||(u=[_(i,"click",(f=t[6],function(e){return e.stopPropagation(),f.call(this,e)})),(a=Nn.call(null,i),a&&s(a.destroy)?a.destroy:e)],c=!0)},p(e,[t]){2&t&&l!==(l="img-"+e[1])&&A(i,"id",l),4&t&&a!==(a=kn+"/"+e[2])&&A(i,"data-src",a),8&t&&A(i,"width",e[3]),8&t&&A(i,"height",e[3]),1&t&&R(i,"selected",e[0]),e[4]?d?d.p(e,t):(d=Sn(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},i:e,o:e,d(e){e&&k(n),d&&d.d(),c=!1,r(u)}}}function zn(e,t,n){let i;o(e,wn,(e=>n(8,i=e)));let{id:r}=t,{path:s}=t,{size:l}=t,{selected:a}=t,{deleteable:c=!1}=t;const u=B();return e.$$set=e=>{"id"in e&&n(1,r=e.id),"path"in e&&n(2,s=e.path),"size"in e&&n(3,l=e.size),"selected"in e&&n(0,a=e.selected),"deleteable"in e&&n(4,c=e.deleteable)},[a,r,s,l,c,u,function(){n(0,a=!a),wn.set(i)},()=>u("delete")]}class Ln extends Me{constructor(e){super(),we(this,e,zn,Cn,l,{id:1,path:2,size:3,selected:0,deleteable:4})}}function jn(t){let n,i;return{c(){n=S("div"),A(n,"id",i="correlation-"+t[0])},m(e,t){M(e,n,t)},p(e,[t]){1&t&&i!==(i="correlation-"+e[0])&&A(n,"id",i)},i:e,o:e,d(e){e&&k(n)}}}function _n(e,t,n){let i,{cluster:r}=t,{name:s}=t,{baseline:l}=t,{augment:a}=t;const o=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),c=B();function u(e){fetch("./correlation",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({cluster:e})}).then((e=>e.json())).then((function(e){for(let t=0;t<e.length;t++)e[t].is_member=e[t].is_member?`In "${s}"`:`Not In "${s}"`;let t=e.map((e=>e.sim)),n={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Correlation between cluster centroid similarity and DC",width:.8*o,height:250,data:{values:e},layer:[{mark:"point",encoding:{x:{axis:{title:`Less "${s}" → More "${s}"`},field:"sim",type:"quantitative",scale:{domain:[Math.min(...t),Math.max(...t)]}},y:{axis:{title:`"${l}" → "${a}"`},field:"dcs",type:"quantitative",scale:{domain:[-1,1]}},color:{axis:{title:"List Membership"},field:"is_member",type:"nominal",scale:{range:["green","gray"]}},tooltip:[{field:"image"}]}},{mark:{type:"line",color:"blue"},transform:[{regression:"dcs",on:"sim"}],encoding:{x:{field:"sim",type:"quantitative"},y:{field:"dcs",type:"quantitative"}}}]};vegaEmbed(`#correlation-${i}`,n,{actions:!1}).then((function(e){e.view.addEventListener("click",(function(e,t){t.hasOwnProperty("datum")&&(console.log("In"==t.datum.is_member.slice(0,2)?"delete":"add"),"In"==t.datum.is_member.slice(0,2)?c("delete",t.datum):c("add",t.datum))}))}))}))}return e.$$set=e=>{"cluster"in e&&n(1,r=e.cluster),"name"in e&&n(2,s=e.name),"baseline"in e&&n(3,l=e.baseline),"augment"in e&&n(4,a=e.augment)},e.$$.update=()=>{4&e.$$.dirty&&n(0,i=s.replaceAll(" ","-")),2&e.$$.dirty&&u(r)},[i,r,s,l,a,u]}class An extends Me{constructor(e){super(),we(this,e,_n,jn,l,{cluster:1,name:2,baseline:3,augment:4,getCorrelation:5})}get getCorrelation(){return this.$$.ctx[5]}}function En(e,t,n){const i=e.slice();i[35]=t[n];const r=i[14].filter((e=>e.id==i[35]))[0];return i[36]=r,i}function Tn(e,t,n){const i=e.slice();i[35]=t[n];const r=i[14].filter((e=>e.id==i[35]))[0];return i[39]=r,i}function On(e,t,n){const i=e.slice();return i[42]=t[n],i[43]=t,i[44]=n,i}function Fn(e,t,n){const i=e.slice();return i[42]=t[n],i[45]=t,i[46]=n,i}function qn(t){let n,i,s,l,a;return{c(){n=S("button"),n.textContent="Export List",i=L(),s=S("button"),s.textContent="Delete List",A(n,"class","btn btn-xs btn-outline w-1/3 mx-2 my-1"),A(s,"class","btn btn-xs btn-outline w-1/3 mx-2 my-1")},m(e,r){M(e,n,r),M(e,i,r),M(e,s,r),l||(a=[_(n,"click",t[20]),_(s,"click",t[21])],l=!0)},p:e,d(e){e&&k(n),e&&k(i),e&&k(s),l=!1,r(a)}}}function Rn(e,t){let n,i,r,s;function l(e){t[22](e,t[42])}let a={id:t[42].idx,path:t[42].iid,size:Qn,deleteable:t[0].isUserList};return void 0!==t[42].selected&&(a.selected=t[42].selected),i=new Ln({props:a}),J.push((()=>be(i,"selected",l))),i.$on("delete",(function(){return t[23](t[42])})),{key:e,first:null,c(){n=j(),$e(i.$$.fragment),this.first=n},m(e,t){M(e,n,t),ye(i,e,t),s=!0},p(e,n){t=e;const s={};1&n[0]&&(s.id=t[42].idx),1&n[0]&&(s.path=t[42].iid),1&n[0]&&(s.deleteable=t[0].isUserList),!r&&1&n[0]&&(r=!0,s.selected=t[42].selected,ee((()=>r=!1))),i.$set(s)},i(e){s||(de(i.$$.fragment,e),s=!0)},o(e){fe(i.$$.fragment,e),s=!1},d(e){e&&k(n),ve(i,e)}}}function Un(e){let t,n,i,r=[],s=new Map,l=e[0].images.slice(Gn,e[0].images.length);const a=e=>e[42].idx;for(let t=0;t<l.length;t+=1){let n=On(e,l,t),i=a(n);s.set(i,r[t]=Vn(i,n))}return{c(){t=S("div");for(let e=0;e<r.length;e+=1)r[e].c();A(t,"class","grid grid-cols-12 gap-0.5")},m(e,n){M(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null);i=!0},p(e,n){32769&n[0]&&(l=e[0].images.slice(Gn,e[0].images.length),ce(),r=ge(r,n,a,1,e,l,s,t,pe,Vn,null,On),ue())},i(e){if(!i){for(let e=0;e<l.length;e+=1)de(r[e]);Z((()=>{n||(n=me(t,un,{},!0)),n.run(1)})),i=!0}},o(e){for(let e=0;e<r.length;e+=1)fe(r[e]);n||(n=me(t,un,{},!1)),n.run(0),i=!1},d(e){e&&k(t);for(let e=0;e<r.length;e+=1)r[e].d();e&&n&&n.end()}}}function Vn(e,t){let n,i,r,s;function l(e){t[24](e,t[42])}let a={class:"m-0",id:t[42].idx,path:t[42].iid,size:Qn,deleteable:t[0].isUserList};return void 0!==t[42].selected&&(a.selected=t[42].selected),i=new Ln({props:a}),J.push((()=>be(i,"selected",l))),i.$on("delete",(function(){return t[25](t[42])})),{key:e,first:null,c(){n=j(),$e(i.$$.fragment),this.first=n},m(e,t){M(e,n,t),ye(i,e,t),s=!0},p(e,n){t=e;const s={};1&n[0]&&(s.id=t[42].idx),1&n[0]&&(s.path=t[42].iid),1&n[0]&&(s.deleteable=t[0].isUserList),!r&&1&n[0]&&(r=!0,s.selected=t[42].selected,ee((()=>r=!1))),i.$set(s)},i(e){s||(de(i.$$.fragment,e),s=!0)},o(e){fe(i.$$.fragment,e),s=!1},d(e){e&&k(n),ve(i,e)}}}function Hn(e){let t,n,i,s,l,a,o,c,u,d,f,h,m,p=e[0].isUserList&&Pn(e);return{c(){t=S("label"),n=S("input"),i=L(),s=S("span"),s.textContent="Show Similar",l=L(),a=S("label"),o=S("input"),c=L(),u=S("span"),u.textContent="Show Counterfactual",d=L(),p&&p.c(),f=j(),A(n,"type","checkbox"),A(n,"class","toggle mr-1"),A(s,"class","label-text"),A(t,"disabled",""),A(t,"class","label cursor-pointer justify-start"),A(o,"type","checkbox"),A(o,"class","toggle mr-1"),A(u,"class","label-text"),A(a,"class","label cursor-pointer justify-start")},m(r,g){M(r,t,g),v(t,n),n.checked=e[8],v(t,i),v(t,s),M(r,l,g),M(r,a,g),v(a,o),o.checked=e[9],v(a,c),v(a,u),M(r,d,g),p&&p.m(r,g),M(r,f,g),h||(m=[_(n,"change",e[27]),_(n,"change",e[28]),_(o,"change",e[29]),_(o,"change",e[30])],h=!0)},p(e,t){256&t[0]&&(n.checked=e[8]),512&t[0]&&(o.checked=e[9]),e[0].isUserList?p?p.p(e,t):(p=Pn(e),p.c(),p.m(f.parentNode,f)):p&&(p.d(1),p=null)},d(e){e&&k(t),e&&k(l),e&&k(a),e&&k(d),p&&p.d(e),e&&k(f),h=!1,r(m)}}}function Pn(e){let t,n,i,l,a,o;return{c(){t=S("label"),n=S("input"),i=L(),l=S("span"),l.textContent="Show Correlation",A(n,"type","checkbox"),A(n,"class","toggle mr-1"),A(l,"class","label-text"),A(t,"class","label cursor-pointer justify-start")},m(r,c){M(r,t,c),v(t,n),n.checked=e[10],v(t,i),v(t,l),a||(o=[_(n,"change",e[31]),_(n,"change",(function(){s(e[11].getCorrelation(e[0]))&&e[11].getCorrelation(e[0]).apply(this,arguments)}))],a=!0)},p(t,i){e=t,1024&i[0]&&(n.checked=e[10])},d(e){e&&k(t),a=!1,r(o)}}}function In(e){let t,n,i,r,s,l,a=e[12],o=[];for(let t=0;t<a.length;t+=1)o[t]=Dn(Tn(e,a,t));const c=e=>fe(o[e],1,1,(()=>{o[e]=null}));return{c(){t=S("div"),n=S("h3"),n.textContent="Similar clusters...",i=L(),r=S("div");for(let e=0;e<o.length;e+=1)o[e].c();A(n,"class","text-lg text-info mb-2"),F(r,"max-height","500px"),A(r,"class","overflow-y-scroll"),A(t,"class","shadow-lg shadow-info w-9/10 p-8 mb-8")},m(e,s){M(e,t,s),v(t,n),v(t,i),v(t,r);for(let e=0;e<o.length;e+=1)o[e].m(r,null);l=!0},p(e,t){if(20509&t[0]){let n;for(a=e[12],n=0;n<a.length;n+=1){const i=Tn(e,a,n);o[n]?(o[n].p(i,t),de(o[n],1)):(o[n]=Dn(i),o[n].c(),de(o[n],1),o[n].m(r,null))}for(ce(),n=a.length;n<o.length;n+=1)c(n);ue()}},i(e){if(!l){for(let e=0;e<a.length;e+=1)de(o[e]);Z((()=>{s||(s=me(t,un,{},!0)),s.run(1)})),l=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)fe(o[e]);s||(s=me(t,un,{},!1)),s.run(0),l=!1},d(e){e&&k(t),N(o,e),e&&s&&s.end()}}}function Yn(e){let t,n;return t=new ei({props:{cluster:e[39],scaleMean:e[2],scaleVariance:e[3],scaleSize:e[4],disableShow:!0}}),{c(){$e(t.$$.fragment)},m(e,i){ye(t,e,i),n=!0},p(e,n){const i={};20480&n[0]&&(i.cluster=e[39]),4&n[0]&&(i.scaleMean=e[2]),8&n[0]&&(i.scaleVariance=e[3]),16&n[0]&&(i.scaleSize=e[4]),t.$set(i)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){ve(t,e)}}}function Dn(e){let t,n,i=e[0].id!=e[35]&&!e[39].isUserList&&Yn(e);return{c(){i&&i.c(),t=j()},m(e,r){i&&i.m(e,r),M(e,t,r),n=!0},p(e,n){e[0].id==e[35]||e[39].isUserList?i&&(ce(),fe(i,1,1,(()=>{i=null})),ue()):i?(i.p(e,n),20481&n[0]&&de(i,1)):(i=Yn(e),i.c(),de(i,1),i.m(t.parentNode,t))},i(e){n||(de(i),n=!0)},o(e){fe(i),n=!1},d(e){i&&i.d(e),e&&k(t)}}}function Bn(e){let t,n,i,r,s,l,a=e[13],o=[];for(let t=0;t<a.length;t+=1)o[t]=Jn(En(e,a,t));const c=e=>fe(o[e],1,1,(()=>{o[e]=null}));return{c(){t=S("div"),n=S("h3"),n.textContent="Counterfactual clusters...",i=L(),r=S("div");for(let e=0;e<o.length;e+=1)o[e].c();A(n,"class","text-lg text-info mb-2"),F(r,"max-height","500px"),A(r,"class","overflow-y-scroll"),A(t,"class","shadow-lg shadow-info w-9/10 p-8 mb-8")},m(e,s){M(e,t,s),v(t,n),v(t,i),v(t,r);for(let e=0;e<o.length;e+=1)o[e].m(r,null);l=!0},p(e,t){if(24604&t[0]){let n;for(a=e[13],n=0;n<a.length;n+=1){const i=En(e,a,n);o[n]?(o[n].p(i,t),de(o[n],1)):(o[n]=Jn(i),o[n].c(),de(o[n],1),o[n].m(r,null))}for(ce(),n=a.length;n<o.length;n+=1)c(n);ue()}},i(e){if(!l){for(let e=0;e<a.length;e+=1)de(o[e]);Z((()=>{s||(s=me(t,un,{},!0)),s.run(1)})),l=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)fe(o[e]);s||(s=me(t,un,{},!1)),s.run(0),l=!1},d(e){e&&k(t),N(o,e),e&&s&&s.end()}}}function Xn(e){let t,n;return t=new ei({props:{cluster:e[36],scaleMean:e[2],scaleVariance:e[3],scaleSize:e[4],disableShow:!0}}),{c(){$e(t.$$.fragment)},m(e,i){ye(t,e,i),n=!0},p(e,n){const i={};24576&n[0]&&(i.cluster=e[36]),4&n[0]&&(i.scaleMean=e[2]),8&n[0]&&(i.scaleVariance=e[3]),16&n[0]&&(i.scaleSize=e[4]),t.$set(i)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){ve(t,e)}}}function Jn(e){let t,n,i=!e[36].isUserList&&Xn(e);return{c(){i&&i.c(),t=j()},m(e,r){i&&i.m(e,r),M(e,t,r),n=!0},p(e,n){e[36].isUserList?i&&(ce(),fe(i,1,1,(()=>{i=null})),ue()):i?(i.p(e,n),24576&n[0]&&de(i,1)):(i=Xn(e),i.c(),de(i,1),i.m(t.parentNode,t))},i(e){n||(de(i),n=!0)},o(e){fe(i),n=!1},d(e){i&&i.d(e),e&&k(t)}}}function Kn(e){let t,n,i,r,s,l,a,o,c,u={cluster:e[0],name:e[1],baseline:e[6],augment:e[7]};return a=new An({props:u}),e[32](a),a.$on("add",e[33]),a.$on("delete",e[34]),{c(){t=S("div"),n=S("h3"),i=z('Correlation with "'),r=z(e[7]),s=z('"...'),l=L(),$e(a.$$.fragment),A(n,"class","text-lg"),A(t,"class","shadow-lg w-9/10 p-8 mb-8")},m(e,o){M(e,t,o),v(t,n),v(n,i),v(n,r),v(n,s),v(t,l),ye(a,t,null),c=!0},p(e,t){(!c||128&t[0])&&T(r,e[7]);const n={};1&t[0]&&(n.cluster=e[0]),2&t[0]&&(n.name=e[1]),64&t[0]&&(n.baseline=e[6]),128&t[0]&&(n.augment=e[7]),a.$set(n)},i(e){c||(de(a.$$.fragment,e),Z((()=>{o||(o=me(t,un,{},!0)),o.run(1)})),c=!0)},o(e){fe(a.$$.fragment,e),o||(o=me(t,un,{},!1)),o.run(0),c=!1},d(n){n&&k(t),e[32](null),ve(a),n&&o&&o.end()}}}function Wn(e){let t,n,i,s,l,a,o,c,u,d,f,h,m,p,g,b,$,y,x,w,N,C,z,j,E,T,O,F,q=[],U=new Map;s=new yn({props:{cluster:e[0],scaleMean:e[2],scaleVariance:e[3],scaleSize:e[4]}});let V=e[0].isUserList&&qn(e),H=e[0].images.slice(0,Gn);const P=e=>e[42].idx;for(let t=0;t<H.length;t+=1){let n=Fn(e,H,t),i=P(n);U.set(i,q[t]=Rn(i,n))}let I=e[0].showMore&&Un(e),Y=!e[5]&&Hn(e),D=e[8]&&In(e),B=e[9]&&Bn(e),X=e[10]&&Kn(e);return{c(){t=S("div"),n=S("div"),i=S("div"),$e(s.$$.fragment),l=L(),a=S("div"),o=S("button"),o.textContent="Select All",c=L(),u=S("button"),u.textContent="Unselect All",d=L(),V&&V.c(),f=L(),h=S("div"),m=S("div");for(let e=0;e<q.length;e+=1)q[e].c();p=L(),I&&I.c(),g=L(),b=S("div"),$=S("label"),y=S("input"),w=L(),N=S("span"),N.textContent="Show More",C=L(),Y&&Y.c(),z=L(),D&&D.c(),j=L(),B&&B.c(),E=L(),X&&X.c(),A(o,"class","btn btn-xs btn-outline w-1/3 mx-2 my-1"),A(u,"class","btn btn-xs btn-outline w-1/3 mx-2 my-1"),A(a,"class","flex flex-wrap justify-center"),A(i,"class","col-span-2 cluster-summary svelte-n07xgu"),A(m,"class","grid grid-cols-12 gap-0.5 mb-px"),A(h,"class","col-span-5"),A(y,"type","checkbox"),A(y,"class","toggle mr-1"),y.disabled=x=e[0].images.length<=12,A(N,"class","label-text svelte-n07xgu"),R(N,"disable-span",e[0].images.length<=12?"hsl(var(--b3))":""),A($,"class","label cursor-pointer justify-start"),A(b,"class","form-control justify-start"),A(n,"class","grid grid-cols-8 p-2"),A(t,"class","bbottom svelte-n07xgu")},m(r,x){M(r,t,x),v(t,n),v(n,i),ye(s,i,null),v(i,l),v(i,a),v(a,o),v(a,c),v(a,u),v(a,d),V&&V.m(a,null),v(n,f),v(n,h),v(h,m);for(let e=0;e<q.length;e+=1)q[e].m(m,null);v(h,p),I&&I.m(h,null),v(n,g),v(n,b),v(b,$),v($,y),y.checked=e[0].showMore,v($,w),v($,N),v(b,C),Y&&Y.m(b,null),v(t,z),D&&D.m(t,null),v(t,j),B&&B.m(t,null),v(t,E),X&&X.m(t,null),T=!0,O||(F=[_(o,"click",e[16]),_(u,"click",e[17]),_(y,"change",e[26])],O=!0)},p(e,n){const i={};1&n[0]&&(i.cluster=e[0]),4&n[0]&&(i.scaleMean=e[2]),8&n[0]&&(i.scaleVariance=e[3]),16&n[0]&&(i.scaleSize=e[4]),s.$set(i),e[0].isUserList?V?V.p(e,n):(V=qn(e),V.c(),V.m(a,null)):V&&(V.d(1),V=null),32769&n[0]&&(H=e[0].images.slice(0,Gn),ce(),q=ge(q,n,P,1,e,H,U,m,pe,Rn,null,Fn),ue()),e[0].showMore?I?(I.p(e,n),1&n[0]&&de(I,1)):(I=Un(e),I.c(),de(I,1),I.m(h,null)):I&&(ce(),fe(I,1,1,(()=>{I=null})),ue()),(!T||1&n[0]&&x!==(x=e[0].images.length<=12))&&(y.disabled=x),1&n[0]&&(y.checked=e[0].showMore),1&n[0]&&R(N,"disable-span",e[0].images.length<=12?"hsl(var(--b3))":""),e[5]?Y&&(Y.d(1),Y=null):Y?Y.p(e,n):(Y=Hn(e),Y.c(),Y.m(b,null)),e[8]?D?(D.p(e,n),256&n[0]&&de(D,1)):(D=In(e),D.c(),de(D,1),D.m(t,j)):D&&(ce(),fe(D,1,1,(()=>{D=null})),ue()),e[9]?B?(B.p(e,n),512&n[0]&&de(B,1)):(B=Bn(e),B.c(),de(B,1),B.m(t,E)):B&&(ce(),fe(B,1,1,(()=>{B=null})),ue()),e[10]?X?(X.p(e,n),1024&n[0]&&de(X,1)):(X=Kn(e),X.c(),de(X,1),X.m(t,null)):X&&(ce(),fe(X,1,1,(()=>{X=null})),ue())},i(e){if(!T){de(s.$$.fragment,e);for(let e=0;e<H.length;e+=1)de(q[e]);de(I),de(D),de(B),de(X),T=!0}},o(e){fe(s.$$.fragment,e);for(let e=0;e<q.length;e+=1)fe(q[e]);fe(I),fe(D),fe(B),fe(X),T=!1},d(e){e&&k(t),ve(s),V&&V.d();for(let e=0;e<q.length;e+=1)q[e].d();I&&I.d(),Y&&Y.d(),D&&D.d(),B&&B.d(),X&&X.d(),O=!1,r(F)}}}const Gn=12,Qn=128;function Zn(e,t,n){let i;o(e,wn,(e=>n(14,i=e)));const r=B();let s,{name:l=""}=t,{cluster:a}=t,{scaleMean:c}=t,{scaleVariance:u}=t,{scaleSize:d}=t,{disableShow:f=!1}=t,{baseline:h=""}=t,{augment:m=""}=t,p=!1,g=!1,b=!1,$=[],y=[];function v(e){p&&fetch("./similar",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({cluster:e})}).then((e=>e.json())).then((function(e){n(12,$=e.neighbors)}))}function x(e){g&&fetch("./counter",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({cluster:e})}).then((e=>e.json())).then((function(e){n(13,y=e.counters)}))}return e.$$set=e=>{"name"in e&&n(1,l=e.name),"cluster"in e&&n(0,a=e.cluster),"scaleMean"in e&&n(2,c=e.scaleMean),"scaleVariance"in e&&n(3,u=e.scaleVariance),"scaleSize"in e&&n(4,d=e.scaleSize),"disableShow"in e&&n(5,f=e.disableShow),"baseline"in e&&n(6,h=e.baseline),"augment"in e&&n(7,m=e.augment)},e.$$.update=()=>{1&e.$$.dirty[0]&&v(a),1&e.$$.dirty[0]&&x(a)},[a,l,c,u,d,f,h,m,p,g,b,s,$,y,i,r,function(){for(let e=0;e<a.images.length;e++)n(0,a.images[e].selected=!0,a);wn.set(i)},function(){for(let e=0;e<a.images.length;e++)n(0,a.images[e].selected=!1,a);wn.set(i)},v,x,()=>function(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download",t+".json"),i.click(),i.remove()}(a,l),()=>r("deleteCluster"),function(t,i){e.$$.not_equal(i.selected,t)&&(i.selected=t,n(0,a))},e=>r("deleteImage",{image:e}),function(t,i){e.$$.not_equal(i.selected,t)&&(i.selected=t,n(0,a))},e=>r("deleteImage",{image:e}),function(){a.showMore=this.checked,n(0,a)},function(){p=this.checked,n(8,p)},()=>v(a),function(){g=this.checked,n(9,g)},()=>x(a),function(){b=this.checked,n(10,b)},function(e){J[e?"unshift":"push"]((()=>{s=e,n(11,s)}))},e=>r("addImage",{image:e.detail}),e=>r("deleteImage",{image:e.detail})]}class ei extends Me{constructor(e){super(),we(this,e,Zn,Wn,l,{name:1,cluster:0,scaleMean:2,scaleVariance:3,scaleSize:4,disableShow:5,baseline:6,augment:7},null,[-1,-1])}}function ti(e,{delay:t=0,duration:n=400,easing:i=cn,axis:r="x"}={}){const s=getComputedStyle(e),l=+s.opacity,a="y"===r?"height":"width",o=parseFloat(s[a]),c="y"===r?["top","bottom"]:["left","right"],u=c.map((e=>`${e[0].toUpperCase()}${e.slice(1)}`)),d=parseFloat(s[`padding${u[0]}`]),f=parseFloat(s[`padding${u[1]}`]),h=parseFloat(s[`margin${u[0]}`]),m=parseFloat(s[`margin${u[1]}`]),p=parseFloat(s[`border${u[0]}Width`]),g=parseFloat(s[`border${u[1]}Width`]);return{delay:t,duration:n,easing:i,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*l};${a}: ${e*o}px;padding-${c[0]}: ${e*d}px;padding-${c[1]}: ${e*f}px;margin-${c[0]}: ${e*h}px;margin-${c[1]}: ${e*m}px;border-${c[0]}-width: ${e*p}px;border-${c[1]}-width: ${e*g}px;`}}function ni(e){let t,n,i,s,l;return{c(){t=S("input"),A(t,"class","input input-bordered w-full max-w-xs"),A(t,"type","text"),A(t,"placeholder","Search text...")},m(n,r){M(n,t,r),O(t,e[5]),i=!0,s||(l=[_(t,"input",e[14]),_(t,"keydown",e[15])],s=!0)},p(e,n){32&n&&t.value!==e[5]&&O(t,e[5])},i(e){i||(Z((()=>{n||(n=me(t,ti,{axis:"x"},!0)),n.run(1)})),i=!0)},o(e){n||(n=me(t,ti,{axis:"x"},!1)),n.run(0),i=!1},d(e){e&&k(t),e&&n&&n.end(),s=!1,r(l)}}}function ii(e){let t;return{c(){t=S("i"),A(t,"class","fa-solid fa-arrow-up")},m(e,n){M(e,t,n)},d(e){e&&k(t)}}}function ri(e){let t;return{c(){t=S("i"),A(t,"class","fa-solid fa-arrow-down")},m(e,n){M(e,t,n)},d(e){e&&k(t)}}}function si(e){let t,n,i,s,l,a,o,c,u,d,f,h,m,p,g,b,$,y,x,w,N,C,j,T,F,U,V,H,P,I,Y,D,B,X,J,K="text"==e[4]&&ni(e);function W(e,t){return e[6]?ri:ii}let G=W(e),Q=G(e);return{c(){t=S("div"),n=S("div"),i=S("label"),i.innerHTML='<span class="label-text">Baseline Text</span>',s=L(),l=S("input"),a=L(),o=S("div"),c=S("label"),c.innerHTML='<span class="label-text">Augmented Text</span>',u=L(),d=S("input"),f=L(),h=S("div"),m=S("label"),m.innerHTML='<span class="label-text">Number Images</span>',p=L(),g=S("div"),b=S("input"),$=L(),y=S("button"),x=z("Query\n                "),w=S("i"),C=L(),j=S("div"),T=S("label"),T.innerHTML='<span class="label-text">Sort Clusters By...</span>',F=L(),U=S("div"),V=S("select"),H=S("option"),H.textContent="Augmented text similarity",P=S("option"),P.textContent="Custom text similarity",I=L(),K&&K.c(),Y=L(),D=S("button"),Q.c(),A(i,"class","label"),A(i,"for","filter-baseline"),A(l,"id","filter-baseline"),A(l,"class","input input-bordered w-full"),A(l,"type","text"),A(l,"placeholder","A photo of a person"),A(n,"class","w-full max-w-xs svelte-18uxpt4"),A(c,"class","label"),A(c,"for","filter-augment"),A(d,"id","filter-augment"),A(d,"class","input input-bordered w-full"),A(d,"type","text"),A(d,"placeholder","A photo of a ceo"),A(o,"class","w-full max-w-xs svelte-18uxpt4"),A(m,"class","label"),A(m,"for","filter-topk"),A(b,"class","input input-bordered w-full"),A(b,"type","number"),A(b,"placeholder","1000"),A(b,"min","2"),A(w,"class","fa-solid fa-sync ml-1"),R(w,"fa-spin",!e[0]),A(y,"class","btn"),y.disabled=N=e[0]?null:"disabled",A(y,"type","submit"),A(g,"id","filter-topk"),A(g,"class","input-group"),A(h,"class","w-full max-w-xs svelte-18uxpt4"),A(T,"class","label"),A(T,"for","sort"),H.__value="mean",H.value=H.__value,H.selected=!0,P.__value="text",P.value=P.__value,A(V,"class","select select-bordered"),void 0===e[4]&&Z((()=>e[13].call(V))),A(D,"class","btn"),A(U,"id","sort"),A(U,"class","input-group"),A(j,"class","w-full svelte-18uxpt4"),A(t,"id","controls"),A(t,"class","form-control w-full svelte-18uxpt4")},m(r,k){M(r,t,k),v(t,n),v(n,i),v(n,s),v(n,l),O(l,e[1]),v(t,a),v(t,o),v(o,c),v(o,u),v(o,d),O(d,e[2]),v(t,f),v(t,h),v(h,m),v(h,p),v(h,g),v(g,b),O(b,e[3]),v(g,$),v(g,y),v(y,x),v(y,w),v(t,C),v(t,j),v(j,T),v(j,F),v(j,U),v(U,V),v(V,H),v(V,P),q(V,e[4]),v(U,I),K&&K.m(U,null),v(U,Y),v(U,D),Q.m(D,null),B=!0,X||(J=[_(l,"input",e[10]),_(d,"input",e[11]),_(b,"input",e[12]),_(y,"click",e[7]),_(V,"change",e[13]),_(V,"change",e[8]),_(D,"click",e[9])],X=!0)},p(e,[t]){2&t&&l.value!==e[1]&&O(l,e[1]),4&t&&d.value!==e[2]&&O(d,e[2]),8&t&&E(b.value)!==e[3]&&O(b,e[3]),1&t&&R(w,"fa-spin",!e[0]),(!B||1&t&&N!==(N=e[0]?null:"disabled"))&&(y.disabled=N),16&t&&q(V,e[4]),"text"==e[4]?K?(K.p(e,t),16&t&&de(K,1)):(K=ni(e),K.c(),de(K,1),K.m(U,Y)):K&&(ce(),fe(K,1,1,(()=>{K=null})),ue()),G!==(G=W(e))&&(Q.d(1),Q=G(e),Q&&(Q.c(),Q.m(D,null)))},i(e){B||(de(K),B=!0)},o(e){fe(K),B=!1},d(e){e&&k(t),K&&K.d(),Q.d(),X=!1,r(J)}}}function li(e,t,n){const i=B();let{enableFilter:r}=t,s=null,l=null,a=null,o="mean",c=null,u=!0;function d(){i("sort",{sortKey:o,sortText:c,sortReverse:u})}return e.$$set=e=>{"enableFilter"in e&&n(0,r=e.enableFilter)},[r,s,l,a,o,c,u,function(){null!=s&&null!=l&&null!=a?i("filter",{baseline:s,augment:l,topk:a,sortKey:o,sortReverse:u}):console.log("Null values...")},d,function(){n(6,u=!u),i("reverse")},function(){s=this.value,n(1,s)},function(){l=this.value,n(2,l)},function(){a=E(this.value),n(3,a)},function(){o=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(4,o)},function(){c=this.value,n(5,c)},e=>{"Enter"==e.key&&d()}]}class ai extends Me{constructor(e){super(),we(this,e,li,si,l,{enableFilter:0})}}const oi=e=>({}),ci=e=>({}),ui=e=>({}),di=e=>({});function fi(e){let t,n,i,s,l,a,o,u,m,p,g,b,$,y,x;const w=e[3].title,N=c(w,e,e[2],di),C=e[3].content,j=c(C,e,e[2],ci);return{c(){t=S("div"),n=S("input"),i=L(),s=S("div"),l=S("div"),a=S("span"),o=z(e[0]),u=L(),N&&N.c(),m=L(),p=S("div"),g=L(),b=S("div"),j&&j.c(),A(n,"type","checkbox"),A(a,"class","indicator-item badge badge-primary"),A(l,"class","indicator"),A(p,"class","divider"),A(s,"class","collapse-title text-2xl font-medium"),A(b,"class","collapse-content svelte-wnf2nf"),R(b,"no-max-height",e[1]),A(t,"tabindex","0"),A(t,"class","collapse collapse-arrow")},m(r,c){M(r,t,c),v(t,n),n.checked=e[1],v(t,i),v(t,s),v(s,l),v(l,a),v(a,o),v(l,u),N&&N.m(l,null),v(s,m),v(s,p),v(t,g),v(t,b),j&&j.m(b,null),$=!0,y||(x=[_(n,"change",e[4]),_(l,"click",hi)],y=!0)},p(e,[t]){2&t&&(n.checked=e[1]),(!$||1&t)&&T(o,e[0]),N&&N.p&&(!$||4&t)&&f(N,w,e,e[2],$?d(w,e[2],t,ui):h(e[2]),di),j&&j.p&&(!$||4&t)&&f(j,C,e,e[2],$?d(C,e[2],t,oi):h(e[2]),ci),2&t&&R(b,"no-max-height",e[1])},i(e){$||(de(N,e),de(j,e),$=!0)},o(e){fe(N,e),fe(j,e),$=!1},d(e){e&&k(t),N&&N.d(e),j&&j.d(e),y=!1,r(x)}}}const hi=e=>e.target.parentElement.previousElementSibling.click();function mi(e,t,n){let{$$slots:i={},$$scope:r}=t,{badge:s}=t,l=!0;return e.$$set=e=>{"badge"in e&&n(0,s=e.badge),"$$scope"in e&&n(2,r=e.$$scope)},[s,l,r,i,function(){l=this.checked,n(1,l)}]}class pi extends Me{constructor(e){super(),we(this,e,mi,fi,l,{badge:0})}}function gi(e,t,n){const i=e.slice();return i[47]=t[n][0],i[48]=t[n][1],i}function bi(e,t,n){const i=e.slice();return i[51]=t[n],i}function $i(e,t,n){const i=e.slice();return i[51]=t[n],i[54]=t,i[55]=n,i}function yi(t){let n;return{c(){n=S("span"),n.textContent="Slices",A(n,"slot","title")},m(e,t){M(e,n,t)},p:e,d(e){e&&k(n)}}}function vi(e){let t,n,i,r,s,l,a,o,c;function u(){e[34].call(i,e[51])}return s=new ei({props:{cluster:e[51],scaleMean:e[3],scaleVariance:e[5],scaleSize:e[4],baseline:e[9],augment:e[10],name:e[16][e[51].id]}}),s.$on("deleteCluster",(function(){return e[35](e[51])})),s.$on("addImage",(function(...t){return e[36](e[51],...t)})),s.$on("deleteImage",(function(...t){return e[37](e[51],...t)})),{c(){t=S("div"),n=S("h2"),i=S("input"),r=L(),$e(s.$$.fragment),l=L(),A(i,"type","text"),A(i,"class","input input-ghost input-lg w-full max-w-md"),F(i,"font-weight","bold",1),A(n,"class","text-xl font-bold"),A(t,"class","my-14")},m(d,f){M(d,t,f),v(t,n),v(n,i),O(i,e[16][e[51].id]),v(t,r),ye(s,t,null),v(t,l),a=!0,o||(c=_(i,"input",u),o=!0)},p(t,n){e=t,65538&n[0]&&i.value!==e[16][e[51].id]&&O(i,e[16][e[51].id]);const r={};2&n[0]&&(r.cluster=e[51]),8&n[0]&&(r.scaleMean=e[3]),32&n[0]&&(r.scaleVariance=e[5]),16&n[0]&&(r.scaleSize=e[4]),512&n[0]&&(r.baseline=e[9]),1024&n[0]&&(r.augment=e[10]),65538&n[0]&&(r.name=e[16][e[51].id]),s.$set(r)},i(e){a||(de(s.$$.fragment,e),a=!0)},o(e){fe(s.$$.fragment,e),a=!1},d(e){e&&k(t),ve(s),o=!1,c()}}}function xi(e,t){let n,i,r,s=t[51].isUserList&&t[51].isDisplayed&&vi(t);return{key:e,first:null,c(){n=j(),s&&s.c(),i=j(),this.first=n},m(e,t){M(e,n,t),s&&s.m(e,t),M(e,i,t),r=!0},p(e,n){(t=e)[51].isUserList&&t[51].isDisplayed?s?(s.p(t,n),2&n[0]&&de(s,1)):(s=vi(t),s.c(),de(s,1),s.m(i.parentNode,i)):s&&(ce(),fe(s,1,1,(()=>{s=null})),ue())},i(e){r||(de(s),r=!0)},o(e){fe(s),r=!1},d(e){e&&k(n),s&&s.d(e),e&&k(i)}}}function wi(e){let t,n,i=[],r=new Map,s=e[1];const l=e=>e[51].id;for(let t=0;t<s.length;t+=1){let n=$i(e,s,t),a=l(n);r.set(a,i[t]=xi(a,n))}return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=j()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);M(e,t,r),n=!0},p(e,n){109119034&n[0]&&(s=e[1],ce(),i=ge(i,n,l,1,e,s,r,t.parentNode,pe,xi,t,$i),ue())},i(e){if(!n){for(let e=0;e<s.length;e+=1)de(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)fe(i[e]);n=!1},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&k(t)}}}function Mi(e){let t,n,i;return{c(){t=z("("),n=z(e[8]),i=z(")")},m(e,r){M(e,t,r),M(e,n,r),M(e,i,r)},p(e,t){256&t[0]&&T(n,e[8])},d(e){e&&k(t),e&&k(n),e&&k(i)}}}function ki(e){let t,n,i=e[1].length>0&&Mi(e);return{c(){t=S("span"),n=z("Clusters "),i&&i.c(),A(t,"slot","title")},m(e,r){M(e,t,r),v(t,n),i&&i.m(t,null)},p(e,n){e[1].length>0?i?i.p(e,n):(i=Mi(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&k(t),i&&i.d()}}}function Ni(e){let t,n;return t=new ei({props:{cluster:e[51],scaleMean:e[3],scaleVariance:e[5],scaleSize:e[4]}}),{c(){$e(t.$$.fragment)},m(e,i){ye(t,e,i),n=!0},p(e,n){const i={};2&n[0]&&(i.cluster=e[51]),8&n[0]&&(i.scaleMean=e[3]),32&n[0]&&(i.scaleVariance=e[5]),16&n[0]&&(i.scaleSize=e[4]),t.$set(i)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){fe(t.$$.fragment,e),n=!1},d(e){ve(t,e)}}}function Si(e,t){let n,i,r,s=!t[51].isUserList&&t[51].isDisplayed&&Ni(t);return{key:e,first:null,c(){n=j(),s&&s.c(),i=j(),this.first=n},m(e,t){M(e,n,t),s&&s.m(e,t),M(e,i,t),r=!0},p(e,n){!(t=e)[51].isUserList&&t[51].isDisplayed?s?(s.p(t,n),2&n[0]&&de(s,1)):(s=Ni(t),s.c(),de(s,1),s.m(i.parentNode,i)):s&&(ce(),fe(s,1,1,(()=>{s=null})),ue())},i(e){r||(de(s),r=!0)},o(e){fe(s),r=!1},d(e){e&&k(n),s&&s.d(e),e&&k(i)}}}function Ci(e){let t,n,i=[],r=new Map,s=e[1];const l=e=>e[51].id;for(let t=0;t<s.length;t+=1){let n=bi(e,s,t),a=l(n);r.set(a,i[t]=Si(a,n))}return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=j()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);M(e,t,r),n=!0},p(e,n){58&n[0]&&(s=e[1],ce(),i=ge(i,n,l,1,e,s,r,t.parentNode,pe,Si,t,bi),ue())},i(e){if(!n){for(let e=0;e<s.length;e+=1)de(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)fe(i[e]);n=!1},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&k(t)}}}function zi(e){let t,n,i,r,s,l=e[48]+"";function a(){return e[40](e[47])}return{c(){t=S("li"),n=S("button"),i=z(l),A(n,"onclick","this.blur();")},m(e,l){M(e,t,l),v(t,n),v(n,i),r||(s=_(n,"click",a),r=!0)},p(t,n){e=t,65536&n[0]&&l!==(l=e[48]+"")&&T(i,l)},d(e){e&&k(t),r=!1,s()}}}function Li(e){let t,n,i,s,l,a,o,c,u,d,f,h,m,p,g,b,$,y,x,w,C,j,E,F,q,U,V,H,P,I,Y,D,B,X,K,W,G,Q,Z,te,ne,ie,re,se,le,ae=e[17].length+"";function oe(t){e[29](t)}t=new ai({props:{enableFilter:e[2]}}),t.$on("filter",e[18]),t.$on("sort",e[27]),t.$on("reverse",e[20]);let ce={fieldName:"mean"};function ue(t){e[31](t)}void 0!==e[0].mean&&(ce.bounds=e[0].mean),a=new on({props:ce}),e[28](a),J.push((()=>be(a,"bounds",oe)));let he={fieldName:"variance",scaleY:"symlog"};function me(t){e[33](t)}void 0!==e[0].variance&&(he.bounds=e[0].variance),u=new on({props:he}),e[30](u),J.push((()=>be(u,"bounds",ue)));let pe={fieldName:"size",scaleY:"symlog"};void 0!==e[0].size&&(pe.bounds=e[0].size),h=new on({props:pe}),e[32](h),J.push((()=>be(h,"bounds",me))),g=new pi({props:{badge:e[7],$$slots:{content:[wi],title:[yi]},$$scope:{ctx:e}}}),$=new pi({props:{badge:e[6],$$slots:{content:[Ci],title:[ki]},$$scope:{ctx:e}}});let ge=Object.entries(e[16]),xe=[];for(let t=0;t<ge.length;t+=1)xe[t]=zi(gi(e,ge,t));return{c(){$e(t.$$.fragment),n=L(),i=S("br"),s=L(),l=S("div"),$e(a.$$.fragment),c=L(),$e(u.$$.fragment),f=L(),$e(h.$$.fragment),p=L(),$e(g.$$.fragment),b=L(),$e($.$$.fragment),y=L(),x=S("div"),w=S("div"),C=S("label"),j=z("Add to List ("),E=z(ae),F=z(")"),q=L(),U=S("ul"),V=S("li"),H=S("button"),H.innerHTML='<i class="fa-solid fa-plus"></i>\n\t\t\t\t\tCreate a List',P=L();for(let e=0;e<xe.length;e+=1)xe[e].c();I=L(),Y=S("button"),Y.textContent="Clear Selection",D=L(),B=S("div"),X=S("div"),K=S("h3"),K.textContent="Create a new list",W=L(),G=S("input"),Q=L(),Z=S("div"),te=S("button"),te.textContent="Cancel",ne=L(),ie=S("button"),ie.textContent="Create List",A(C,"class","btn m-1"),R(C,"btn-disabled",0==e[17].length),A(U,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52 min-w-max"),A(w,"class","dropdown dropdown-top"),R(w,"dropdown-hover",e[17].length>0),A(Y,"class","btn"),R(Y,"btn-disabled",0==e[17].length),A(x,"class","fixed flex items-center bottom-14 left-14 w-1/2 z-10"),A(K,"class","text-lg font-bold"),A(G,"type","text"),A(G,"placeholder","List name"),A(G,"class","input input-bordered w-full my-4 min-w-full"),A(te,"class","btn m-1"),A(ie,"class","btn btn-primary"),R(ie,"btn-disabled",""==e[15]),A(Z,"class","flex items-center justify-end"),A(X,"class","modal-box relative"),A(B,"class","modal"),R(B,"modal-open",e[14])},m(r,o){ye(t,r,o),M(r,n,o),M(r,i,o),M(r,s,o),M(r,l,o),ye(a,l,null),v(l,c),ye(u,l,null),v(l,f),ye(h,l,null),M(r,p,o),ye(g,r,o),M(r,b,o),ye($,r,o),M(r,y,o),M(r,x,o),v(x,w),v(w,C),v(C,j),v(C,E),v(C,F),v(w,q),v(w,U),v(U,V),v(V,H),v(U,P);for(let e=0;e<xe.length;e+=1)xe[e].m(U,null);v(x,I),v(x,Y),M(r,D,o),M(r,B,o),v(B,X),v(X,K),v(X,W),v(X,G),O(G,e[15]),v(X,Q),v(X,Z),v(Z,te),v(Z,ne),v(Z,ie),re=!0,se||(le=[_(C,"click",e[38]),_(H,"click",e[39]),_(Y,"click",e[21]),_(G,"input",e[41]),_(te,"click",e[42]),_(ie,"click",e[22])],se=!0)},p(e,n){const i={};4&n[0]&&(i.enableFilter=e[2]),t.$set(i);const r={};!o&&1&n[0]&&(o=!0,r.bounds=e[0].mean,ee((()=>o=!1))),a.$set(r);const s={};!d&&1&n[0]&&(d=!0,s.bounds=e[0].variance,ee((()=>d=!1))),u.$set(s);const l={};!m&&1&n[0]&&(m=!0,l.bounds=e[0].size,ee((()=>m=!1))),h.$set(l);const c={};128&n[0]&&(c.badge=e[7]),67130&n[0]|33554432&n[1]&&(c.$$scope={dirty:n,ctx:e}),g.$set(c);const f={};if(64&n[0]&&(f.badge=e[6]),314&n[0]|33554432&n[1]&&(f.$$scope={dirty:n,ctx:e}),$.$set(f),(!re||131072&n[0])&&ae!==(ae=e[17].length+"")&&T(E,ae),131072&n[0]&&R(C,"btn-disabled",0==e[17].length),16842752&n[0]){let t;for(ge=Object.entries(e[16]),t=0;t<ge.length;t+=1){const i=gi(e,ge,t);xe[t]?xe[t].p(i,n):(xe[t]=zi(i),xe[t].c(),xe[t].m(U,null))}for(;t<xe.length;t+=1)xe[t].d(1);xe.length=ge.length}131072&n[0]&&R(w,"dropdown-hover",e[17].length>0),131072&n[0]&&R(Y,"btn-disabled",0==e[17].length),32768&n[0]&&G.value!==e[15]&&O(G,e[15]),32768&n[0]&&R(ie,"btn-disabled",""==e[15]),16384&n[0]&&R(B,"modal-open",e[14])},i(e){re||(de(t.$$.fragment,e),de(a.$$.fragment,e),de(u.$$.fragment,e),de(h.$$.fragment,e),de(g.$$.fragment,e),de($.$$.fragment,e),re=!0)},o(e){fe(t.$$.fragment,e),fe(a.$$.fragment,e),fe(u.$$.fragment,e),fe(h.$$.fragment,e),fe(g.$$.fragment,e),fe($.$$.fragment,e),re=!1},d(o){ve(t,o),o&&k(n),o&&k(i),o&&k(s),o&&k(l),e[28](null),ve(a),e[30](null),ve(u),e[32](null),ve(h),o&&k(p),ve(g,o),o&&k(b),ve($,o),o&&k(y),o&&k(x),N(xe,o),o&&k(D),o&&k(B),se=!1,r(le)}}}function ji(e,t,n){return t<=e&&e<=n}function _i(e,t){let n=!t.mean||ji(e.mean,...t.mean),i=!t.variance||ji(e.variance,...t.variance),r=!t.size||ji(e.size,...t.size);return n&&i&&r}function Ai(e,t,n){let i,r;o(e,wn,(e=>n(1,i=e))),o(e,Mn,(e=>n(17,r=e)));let s,l,a,c=!0,u={mean:null,variance:null,size:null},d=nn().domain([0,1]),f=nn(),h=nn(),p=null,g=null,b="",$="",y="",v=0,x=!1,w="",M={};async function k(e,t){return"text"==e.detail.sortKey&&null!=e.detail.sortText?await fetch("./textrank",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({text:e.detail.sortText})}).then((e=>e.json())).then((function(e){t.sort((function(t,n){let i=e[t.id],r=e[n.id];return i<r?-1:i>r?1:0}))})):t.sort((function(t,n){let i=t[e.detail.sortKey],r=n[e.detail.sortKey];return i<r?-1:i>r?1:0})),e.detail.sortReverse&&t.reverse(),null==e.detail.sortText&&(e.detail.sortText=""),"text"!=e.detail.sortKey&&e.detail.sortReverse?n(8,b=`More "${y}" → Less "${y}"`):"text"==e.detail.sortKey||e.detail.sortReverse?"text"==e.detail.sortKey&&e.detail.sortReverse?n(8,b=`More "${e.detail.sortText}" → Less "${e.detail.sortText}"`):"text"!=e.detail.sortKey||e.detail.sortReverse||n(8,b=`Less "${e.detail.sortText}" → More "${e.detail.sortText}"`):n(8,b=`Less "${y}" → More "${y}"`),t}function N(){for(let e=0;e<i.length;e++){let t=i[e];for(let e=0;e<t.images.length;e++)t.images[e].selected=!1}wn.set(i)}function S(){let e=Math.max(...i.map((e=>e.variance))),t=Math.max(...i.map((e=>e.size))),r=[0,document.getElementsByClassName("cluster-summary")[0].clientWidth-115];n(3,d=d.range(r)),n(5,h=h.domain([0,e]).range(r)),n(4,f=f.domain([0,t]).range(r))}function C(e){fetch("./remlist",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify(e)}).then((function(){delete M[e.id],n(16,M),m(wn,i=i.filter((t=>t.id!=e.id)),i),S()}))}function z(e){let t=i.filter((t=>t.id==e))[0],n=[];for(let e=0;e<r.length;e++){let i=r[e];~t.images.includes(i)&&n.push(i)}A(t,[...new Set([...t.images,...n])])}function L(e,t){for(let n=0;n<i.length;n++)for(let r=0;r<i[n].images.length;r++){let s=i[n].images[r];if(s.iid==t.iid){A(e,[...new Set([...e.images,s])]);break}}}function j(e,t){for(let n=0;n<i.length;n++)for(let r=0;r<i[n].images.length;r++){let s=i[n].images[r];if(s.iid==t.iid){_(e,s);break}}}function _(e,t){1==e.images.length?C(e):A(e,e.images.filter((e=>e!=t)))}function A(e,t){fetch("./updateuserlist",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({c:e.id,idxs:t.map((e=>e.idx))})}).then((e=>e.json())).then((function(n){e.mean=n.mean,e.variance=n.variance,e.size=n.size,e.images=t,wn.set(i)})).then((function(){let e=Math.max(...i.map((e=>e.variance))),t=Math.max(...i.map((e=>e.size))),r=[0,document.getElementsByClassName("cluster-summary")[0].clientWidth-115];n(3,d=d.range(r)),n(5,h=h.domain([0,e]).range(r)),n(4,f=f.domain([0,t]).range(r)),N()}))}return e.$$.update=()=>{if(195&e.$$.dirty[0]){let e;n(6,p=0),n(7,g=0);for(let t=0;t<i.length;t++){let r=i[t];r.isUserList?(r.isDisplayed=!0,n(7,g+=1)):(e=_i(r,u),r.isDisplayed=e,n(6,p+=e))}wn.set(i)}},[u,i,c,d,f,h,p,g,b,$,y,s,l,a,x,w,M,r,function(e){n(2,c=!1),n(16,M={}),n(9,$=e.detail.baseline),n(10,y=e.detail.augment),v=e.detail.topk,fetch("./filter",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({baseline:$,augment:y,k:v,w:.95,dt:.18})}).then((e=>e.json())).then((function(t){let i=t;for(let e=0;e<i.length;e++)i[e].showMore=!1,i[e].showSimilar=!1,i[e].showCounter=!1,i[e].isDisplayed=!0,i[e].isUserList=!1;k(e,i).then((function(e){wn.set(e)})).then((function(){S()})),n(2,c=!0),s.updateHistogram(i),l.updateHistogram(i),a.updateHistogram(i)}))},k,function(e){n(8,b=b.split("→").reverse().join("→")),wn.update((e=>e.reverse()))},N,function(){fetch("./userlist",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({idxs:r.map((e=>e.idx))})}).then((e=>e.json())).then((function(e){e.showMore=!1,e.showSimilar=!1,e.showCounter=!1,e.isDisplayed=!0,e.isUserList=!0,e.images=r,n(16,M[e.id]=w,M),m(wn,i=[...i,e],i)})).then((function(){S(),N(),n(14,x=!1)}))},C,z,L,j,e=>k(e,i).then((e=>wn.set(e))),function(e){J[e?"unshift":"push"]((()=>{s=e,n(11,s)}))},function(t){e.$$.not_equal(u.mean,t)&&(u.mean=t,n(0,u))},function(e){J[e?"unshift":"push"]((()=>{l=e,n(12,l)}))},function(t){e.$$.not_equal(u.variance,t)&&(u.variance=t,n(0,u))},function(e){J[e?"unshift":"push"]((()=>{a=e,n(13,a)}))},function(t){e.$$.not_equal(u.size,t)&&(u.size=t,n(0,u))},function(e){M[e.id]=this.value,n(16,M)},e=>C(e),(e,t)=>L(e,t.detail.image),(e,t)=>j(e,t.detail.image),()=>{n(14,x=!0),n(15,w="")},()=>{n(14,x=!0),n(15,w="")},e=>z(e),function(){w=this.value,n(15,w)},()=>n(14,x=!1)]}class Ei extends Me{constructor(e){super(),we(this,e,Ai,Li,l,{},null,[-1,-1])}}function Ti(t){let n,i,r,s,l,a;return l=new Ei({}),{c(){n=S("main"),i=S("div"),i.innerHTML='<h1 class="normal-case text-4xl p-4">VLSlice</h1>',r=L(),s=S("div"),$e(l.$$.fragment),A(i,"class","navbar bg-neutral text-neutral-content flex justify-between"),A(s,"id","content"),A(s,"class","p-4"),A(n,"class","max-w-none relative")},m(e,t){M(e,n,t),v(n,i),v(n,r),v(n,s),ye(l,s,null),a=!0},p:e,i(e){a||(de(l.$$.fragment,e),a=!0)},o(e){fe(l.$$.fragment,e),a=!1},d(e){e&&k(n),ve(l)}}}return new class extends Me{constructor(e){super(),we(this,e,null,Ti,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
